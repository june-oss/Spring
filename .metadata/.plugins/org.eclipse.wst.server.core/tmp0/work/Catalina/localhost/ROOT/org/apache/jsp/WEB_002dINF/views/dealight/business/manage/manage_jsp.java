/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/9.0.38
 * Generated at: 2021-01-01 14:26:38 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.views.dealight.business.manage;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class manage_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(7);
    _jspx_dependants.put("jar:file:/Users/hyeonjung/Documents/Coding/spring/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/dealight_project/WEB-INF/lib/spring-security-taglibs-5.0.6.RELEASE.jar!/META-INF/security.tld", Long.valueOf(1528824936000L));
    _jspx_dependants.put("/WEB-INF/lib/spring-security-taglibs-5.0.6.RELEASE.jar", Long.valueOf(1607427738689L));
    _jspx_dependants.put("/WEB-INF/lib/jstl-1.2.jar", Long.valueOf(1605067212452L));
    _jspx_dependants.put("/WEB-INF/views/dealight/business/manage/../../../includes/mainFooter.jsp", Long.valueOf(1609294595000L));
    _jspx_dependants.put("jar:file:/Users/hyeonjung/Documents/Coding/spring/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/dealight_project/WEB-INF/lib/jstl-1.2.jar!/META-INF/c.tld", Long.valueOf(1153352682000L));
    _jspx_dependants.put("/WEB-INF/views/dealight/business/manage/../../../includes/mainMenu.jsp", Long.valueOf(1609496439000L));
    _jspx_dependants.put("jar:file:/Users/hyeonjung/Documents/Coding/spring/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/dealight_project/WEB-INF/lib/jstl-1.2.jar!/META-INF/fmt.tld", Long.valueOf(1153352682000L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = null;
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fif_0026_005ftest;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fif_0026_005ftest = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.release();
    _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess.release();
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    if (!javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      final java.lang.String _jspx_method = request.getMethod();
      if ("OPTIONS".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        return;
      }
      if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
        return;
      }
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("<!-- 동인 추가 -->\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("<html>\n");
      out.write("<head>\n");
      out.write("<!--  common  -->\n");
      out.write("<link rel=\"stylesheet\" href=\"/resources/css/common.css\" type =\"text/css\" />\n");
      out.write("<link rel=\"stylesheet\" href=\"/resources/css/main_footer.css\" type =\"text/css\" />\n");
      out.write("<link rel=\"stylesheet\" href=\"/resources/css/main_header.css\" type =\"text/css\" />\n");
      out.write("<link rel=\"stylesheet\" href=\"/resources/css/alert_manager.css\" type =\"text/css\" />\n");
      out.write("<link rel=\"shortcut icon\" href=\"/resources/icon/favicon.png\" type=\"image/x-icon\">\n");
      out.write("<link rel=\"icon\" href=\"/resources/icon/favicon.png\" type=\"image/x-icon\">\n");
      out.write("<!--  end common  -->\n");
      out.write("\n");
      out.write("<meta charset=\"UTF-8\">\n");
      out.write("<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n");
      out.write("<script src=\"https://use.fontawesome.com/releases/v5.2.0/js/all.js\"></script>\n");
      out.write("\n");
      out.write("<!-- Add icon library -->\n");
      out.write("<link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" rel=\"stylesheet\">\n");
      out.write("<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\n");
      out.write("<style>\n");
      out.write("\n");
      out.write("\n");
      out.write(".top {\n");
      out.write("\toverflow: hidden;\n");
      out.write("\tflex: 1;\n");
      out.write("\t/* 비율을 1:1:1로 주기 */\n");
      out.write("\theight: 35px;\n");
      out.write("\tdisplay: inline-block;\n");
      out.write("\tz-index: 0;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".dropbtn {\n");
      out.write("\tmargin-top: 0;\n");
      out.write("\tpadding-left: 10px;\n");
      out.write("\tborder: none;\n");
      out.write("\toutline: none;\n");
      out.write("\tfont-size: 30px;\n");
      out.write("\tcursor: pointer;\n");
      out.write("\tdisplay: inline-block;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".dropdown {\n");
      out.write("\tposition: absolute;\n");
      out.write("\tdisplay: inline-block;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".dropdown-content {\n");
      out.write("\tdisplay: none;\n");
      out.write("\tposition: absolute;\n");
      out.write("\tmin-width: 160px;\n");
      out.write("\tz-index: 1;\n");
      out.write("\tbackground-color: #f1f1f1;\n");
      out.write("\tbox-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n");
      out.write("}\n");
      out.write("\n");
      out.write(".dropdown-content a {\n");
      out.write("\tdisplay: block;\n");
      out.write("\tpadding: 3px;\n");
      out.write("\tcolor: black;\n");
      out.write("\tfont-size: 15px;\n");
      out.write("\ttext-decoration: none;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".dropdown-content a:hover {\n");
      out.write("\tbackground-color: crimson;\n");
      out.write("\tcolor: white;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".dropbtn:hover .dropdown-content {\n");
      out.write("\tdisplay: block;\n");
      out.write("\tz-index: 99;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".logo {\n");
      out.write("\tmargin-left: 40%;\n");
      out.write("\tpadding: 3px 8px;\n");
      out.write("\tdisplay: inline-block;\n");
      out.write("\theight: 100%;\n");
      out.write("\ttext-align: center;\n");
      out.write("\tfont-size: 30px;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".logo-content {\n");
      out.write("\tfloat: left;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".rightIcon {\n");
      out.write("\tfloat: right;\n");
      out.write("\tpadding: 3px 8px;\n");
      out.write("\tfont-size: 28px;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".mydropbtn {\n");
      out.write("\tcolor: white;\n");
      out.write("\tz-index: 1;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".mydropdown {\n");
      out.write("\tposition: relative;\n");
      out.write("\tdisplay: inline-block;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".mydropdown-content {\n");
      out.write("\tdisplay: none;\n");
      out.write("\tposition: absolute;\n");
      out.write("\tbackground-color: #f1f1f1;\n");
      out.write("\tmin-width: 160px;\n");
      out.write("\tbox-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n");
      out.write("\tz-index: 1;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".mydropdown-content a {\n");
      out.write("\tcolor: black;\n");
      out.write("\tfont-size: 15px;\n");
      out.write("\tpadding: 3px 5px;\n");
      out.write("\ttext-decoration: none;\n");
      out.write("\tdisplay: block;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".mydropdown-content a:hover {\n");
      out.write("\tbackground-color: #ddd;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".mydropdown:hover .mydropdown-content {\n");
      out.write("\tdisplay: block;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".middleDiv {\n");
      out.write("\twidth: 100%;\n");
      out.write("\theight: 600px;\n");
      out.write("\tposition: relative;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".imgContainer {\n");
      out.write("\twidth: 100%;\n");
      out.write("\theight: 100%;\n");
      out.write("\tposition: absolute;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".imgContainer img {\n");
      out.write("\tposition: absolute;\n");
      out.write("\ttop: 0;\n");
      out.write("\tleft: 0;\n");
      out.write("\twidth: 100%;\n");
      out.write("\theight: 100%;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".searchBarDiv {\n");
      out.write("\tborder: 1px solid black;\n");
      out.write("\tmargin: 0 auto;\n");
      out.write("\tmargin-top: 100px;\n");
      out.write("\twidth: 40%;\n");
      out.write("\theight: 100px;\n");
      out.write("\tposition: relative;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".topRow {\n");
      out.write("\tborder: 1px solid black;\n");
      out.write("\tdisplay: inline-block;\n");
      out.write("\twidth: 100%;\n");
      out.write("\theight: 50%;\n");
      out.write("\tbackground-color: white;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".topRowBar {\n");
      out.write("\tborder: 1px solid black;\n");
      out.write("\tfloat: left;\n");
      out.write("\twidth: 33.33%;\n");
      out.write("\theight: 100%;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".bottomRow {\n");
      out.write("\tborder: 1px solid black;\n");
      out.write("\tdisplay: block;\n");
      out.write("\tposition: absolute;\n");
      out.write("\ttop: 50%;\n");
      out.write("\twidth: 100%;\n");
      out.write("\theight: 50%;\n");
      out.write("\tbackground-color: white;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".bottomRowBar {\n");
      out.write("\tborder: 1px solid black;\n");
      out.write("\tfloat: left;\n");
      out.write("\twidth: 80%;\n");
      out.write("\theight: 100%;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".searchbtn {\n");
      out.write("\tbackground-color: crimson;\n");
      out.write("\tcolor: white;\n");
      out.write("\twidth: 20%;\n");
      out.write("\theight: 100%;\n");
      out.write("\tborder: none;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".dealTitleDiv {\n");
      out.write("\tborder: 1px solid rgb(151, 151, 151);\n");
      out.write("\twidth: 80%;\n");
      out.write("\theight: 50px;\n");
      out.write("\tmargin: 30px auto 0 auto;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".dealTitle {\n");
      out.write("\tborder: 1px solid black;\n");
      out.write("\twidth: 150px;\n");
      out.write("\theight: 100%;\n");
      out.write("\tdisplay: inline-block;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".dealDiv {\n");
      out.write("\tborder: 1px solid black;\n");
      out.write("\twidth: 80%;\n");
      out.write("\theight: 1200px;\n");
      out.write("\tmargin: auto;\n");
      out.write("\toverflow: hidden;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".dealContainer {\n");
      out.write("\tborder: 1px solid black;\n");
      out.write("\tdisplay: inline-block;\n");
      out.write("\tmargin: 23px 30px;\n");
      out.write("\twidth: 28%;\n");
      out.write("\theight: 350px;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".dealImg {\n");
      out.write("\tborder: 1px solid black;\n");
      out.write("\tdisplay: block;\n");
      out.write("\twidth: 100%;\n");
      out.write("\theight: 70%;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".dealText {\n");
      out.write("\tborder: 1px solid black;\n");
      out.write("\tdisplay: block;\n");
      out.write("\twidth: 100%;\n");
      out.write("\theight: 30%;\n");
      out.write("}\n");
      out.write("\n");
      out.write(".footer {\n");
      out.write("\tborder: 1px solid black;\n");
      out.write("\twidth: 100%;\n");
      out.write("\theight: 180px; \n");
      out.write("\tz-index: 1;\n");
      out.write("\tcursor: pointer;\n");
      out.write("}\n");
      out.write("\n");
      out.write("/* add style */\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("/* end added style*/\n");
      out.write("\n");
      out.write("\n");
      out.write("</style>\n");
      out.write("</head>\n");
      out.write("<body>\n");
      out.write("<header class=\"main_nav\">\n");
      out.write("        <nav class=\"main_nav_left\">\n");
      out.write("        \t<a href='/dealight/dealight/'><div class=\"main_nav_logo\"><img id=\"logo\" src=\"/resources/icon/d2.png\" alt=\"\"></div></a>\n");
      out.write("        </nav>\n");
      out.write("        \n");
      out.write("        <nav class=\"main_nav_right\">\n");
      out.write("            <div id=\"header_cur_wait\"></div>\n");
      out.write("            <div class='nav_user_id_box'>");
      if (_jspx_meth_c_005fif_005f0(_jspx_page_context))
        return;
      out.write("</div>\n");
      out.write("            <div class=\"nav_reg_brno\"><a href=\"/dealight/mypage/bizauth/list\">사업자 등록</a></div>\n");
      out.write("            <div class=\"account_btn\">\n");
      out.write("            \t<div class=\"account_icon_box\">\n");
      out.write("            \t\t<div class=\"account_menu\"><i class=\"fas fa-bars\"></i></div>\n");
      out.write("            \t\t<div class=\"account_icon\"><i class=\"fas fa-user-circle\"></i></div>\n");
      out.write("            \t\t<div class=\"account-dropdown-content\">\n");
      out.write("\t\t\t\t\t\t<div class=\"common_menu_cnts\">\n");
      out.write("\t\t\t\t\t\t\t<div class=\"account_cnts\"><a href=\"/dealight/hotdeal/main\">핫딜 찾기</a></div>\n");
      out.write("\t        \t\t\t\t<div class=\"account_cnts\"><a href=\"/dealight/search/\">매장 찾기</a></div>\n");
      out.write("\t        \t\t\t</div>\n");
      out.write("\t\t\t\t\t\t");
      if (_jspx_meth_sec_005fauthorize_005f0(_jspx_page_context))
        return;
      out.write("\n");
      out.write("\t\t\t\t\t\t");
      if (_jspx_meth_sec_005fauthorize_005f1(_jspx_page_context))
        return;
      out.write("\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("            \t</div>\n");
      out.write("            </div>\n");
      out.write("        </nav>\n");
      out.write("    </header>\n");
      out.write("    \n");
      out.write("    <div class=\"alert manage_rsvd hide\">\n");
      out.write("        <div class=\"alert_check_mark rsvd\">\n");
      out.write("            <i class=\"fas fa-check-circle\"></i>\n");
      out.write("        </div>\n");
      out.write("        <div class=\"alert_cnts_wrapper\">\n");
      out.write("             <strong class=\"alert_tit\">예약</strong>\n");
      out.write("             <span class=\"alert_msg\">예약 관련 notification 입니다.</span>\n");
      out.write("        </div>\n");
      out.write("        <span class=\"alert_closebtn\"><i class=\"fas fa-times\"></i></span>  \n");
      out.write("    </div>\n");
      out.write("    <div class=\"alert manage_wait hide\">\n");
      out.write("        <div class=\"alert_check_mark wait\">\n");
      out.write("            <i class=\"fas fa-check-circle\"></i>\n");
      out.write("        </div>\n");
      out.write("        \n");
      out.write("        <div class=\"alert_cnts_wrapper\">\n");
      out.write("            <div class=\"alert_cnts_top\">\n");
      out.write("                <strong class=\"alert_tit\">웨이팅</strong>\n");
      out.write("            </div>\n");
      out.write("            <span class=\"alert_msg\"><a>104번 웨이팅</a>이 등록되었습니다.</span>\n");
      out.write("        </div>\n");
      out.write("        <span class=\"alert_closebtn\"><i class=\"fas fa-times\"></i></span>  \n");
      out.write("      </div>\n");
      out.write("      <div class=\"alert manage_htdl hide\">\n");
      out.write("        <div class=\"alert_check_mark htdl\">\n");
      out.write("            <i class=\"fas fa-check-circle\"></i>\n");
      out.write("        </div>\n");
      out.write("        <div class=\"alert_cnts_wrapper\">\n");
      out.write("            <strong class=\"alert_tit\">핫딜</strong>\n");
      out.write("            <span class=\"alert_senduser\"></span>\n");
      out.write("            <span class=\"alert_msg\">핫딜 관련 notification 입니다.</span>\n");
      out.write("            <span class=\"alert_dto\"></span>\n");
      out.write("        </div>\n");
      out.write("        <span class=\"alert_closebtn\"><i class=\"fas fa-times\"></i></span>\n");
      out.write("        <div class=\"alert_btn_box\"> \n");
      out.write("            <button class='btnAcceptHtdl'>등록</button>\n");
      out.write("            <button class=\"alert_reject_btn\">거절</button>\n");
      out.write("        </div>\n");
      out.write("      </div>\n");
      out.write("\t\n");
      out.write("\t<script>\n");
      out.write("\t\n");
      out.write("\t$(document).ready(function(){\n");
      out.write("\t\tconsole.log(\"security user.....\")\n");
      out.write("\t\tconsole.log('");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.SPRING_SECURITY_CONTEXT.authentication.principal}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("');\n");
      out.write("\n");
      out.write("\t});\n");
      out.write("\n");
      out.write("\t//로그아웃 폼 제출\n");
      out.write("\tfunction submit(e){\n");
      out.write("\t\te.preventDefault();\n");
      out.write("\t\tlet body = $(\"body\");\n");
      out.write("\t\tlet form = $(\"<form></form>\");\n");
      out.write("\t\tform.attr(\"action\", \"/logout\");\n");
      out.write("\t\tform.attr(\"method\", \"post\");\n");
      out.write("\t\t\n");
      out.write("\t\tlet csrfInput = $(\"<input type='hidden' name='");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${_csrf.parameterName}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("' value='");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${_csrf.token}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("'>\");\n");
      out.write("\t\tform.append(csrfInput);\n");
      out.write("\t\tform.appendTo(body);\n");
      out.write("\t\tform.submit();\n");
      out.write("\t\t\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("\t$(\"#logo\").on(\"click\",function(e){\n");
      out.write("\t\t\n");
      out.write("\t\tself.location.href=\"/dealight/dealight\";\n");
      out.write("\t});\n");
      out.write("\t\n");
      out.write("\t\n");
      out.write(" //1. 버튼을 누르면 모달창이 띄어지고, 배경 회색으로 변경\n");
      out.write("   function openModal(){\n");
      out.write("       document.getElementById('content').style.display='block';\n");
      out.write("       document.body.style.backgroundColor = \"rgba(0,0,0,0.4)\";\n");
      out.write("\n");
      out.write("}\n");
      out.write("\n");
      out.write("//2. X버튼을 누르면 모달창이 사라지고 원상복귀\n");
      out.write("   function closebtn(){\n");
      out.write("   document.getElementById('content').style.display='none';\n");
      out.write("   document.body.style.backgroundColor = \"white\";\n");
      out.write("}\n");
      out.write("\n");
      out.write("//3. login상태에서 사람모양 클릭시 mypage(예약내역)로 이동\n");
      out.write("function goMypage(){\n");
      out.write("\t location.href=\"/dealight/mypage/reservation\";\n");
      out.write("\n");
      out.write("}\n");
      out.write("\n");
      out.write("// '해당 매장'의 '웨이팅 리스트'를 가져온다.\n");
      out.write("function getWait(userId,callback,error) {\n");
      out.write("    \n");
      out.write("    let waitList = $.getJSON(\"/dealight/isCurWait/\"+userId+\".json\",\n");
      out.write("        function(data){\n");
      out.write("                if(callback){\n");
      out.write("                    callback(data);\n");
      out.write("                }\n");
      out.write("            }).fail(function(xhr,status,err){\n");
      out.write("                if(error){\n");
      out.write("                    error();\n");
      out.write("                }\n");
      out.write("    });\n");
      out.write("    \n");
      out.write("    return waitList;\n");
      out.write("}\n");
      out.write("\n");
      out.write("let header_userId = '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${userId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("';\n");
      out.write("\n");
      out.write("getWait(header_userId,wait => {\n");
      out.write("\tif(!wait)\n");
      out.write("\t\treturn\n");
      out.write("\tlet waitId = wait.waitId;\n");
      out.write("\tlet str = \"\";\n");
      out.write("\tconsole.log(waitId);\n");
      out.write("\tstr += \"<a href='/dealight/waiting/\"+waitId+\"' target='_blank'>현재 웨이팅 확인하기</a>\"\n");
      out.write("\t$(\"#header_cur_wait\").html(str);\n");
      out.write("});\n");
      out.write("\n");
      out.write("   </script>");
      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html>\n");
      out.write("<head>\n");
      out.write("<meta charset=\"UTF-8\">\n");
      out.write("<title>매장 관리</title>\n");
      out.write("<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n");
      out.write("<link href=\"https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap\" rel=\"stylesheet\">\n");
      out.write("<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n");
      out.write("<link href=\"https://fonts.googleapis.com/css2?family=Montserrat:wght@800&display=swap\" rel=\"stylesheet\">\n");
      out.write("<!-- <script src=\"https://kit.fontawesome.com/0f892675ba.js\" crossorigin=\"anonymous\"></script> -->\n");
      out.write("<script src=\"https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js\"></script>\n");
      out.write("<script src=\"/resources/js/Chart.js\"></script>\n");
      out.write("<link rel=\"stylesheet\" href=\"/resources/css/manage.css\">\n");
      out.write("<link rel=\"stylesheet\" href=\"/resources/css/fileupload.css\">\n");
      out.write("<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/brands.min.css\" integrity=\"sha512-D0B6cFS+efdzUE/4wh5XF5599DtW7Q1bZOjAYGBfC0Lg9WjcrqPXZto020btDyrlDUrfYKsmzFvgf/9AB8J0Jw==\" crossorigin=\"anonymous\" />\n");
      out.write("</head>\n");
      out.write("<body>\n");
      out.write("<main class=\"store_board\" id=\"store_board_main\">\n");
      out.write("        <div class=\"main_box\"><!-- main box -->\n");
      out.write("            <div class=\"board\"> <!-- board -->\n");
      out.write("                <div class=\"board_left_wrapper\">\n");
      out.write("                    <div class=\"board_left_top\">\n");
      out.write("                        <div class=\"nav_date js-clock\">\n");
      out.write("                        \t<span class=\"date\">2020-12-18</span><span style=\"color:white;\">_</span><span class=\"time\">00:00</span>\n");
      out.write("                        </div>\n");
      out.write("                    </div>\n");
      out.write("                    <div class=\"board_left_bot\">\n");
      out.write("                        <div class=\"btn_wait_register\">현장 등록</div>\n");
      out.write("                        <div><a href=\"/dealight/business/manage/modify?storeId=");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${storeId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\">정보 수정</a></div>\n");
      out.write("                        <div><a href=\"/dealight/business/manage/menu?storeId=");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${storeId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\">메뉴 수정</a></div>\n");
      out.write("                        <div><a href=\"/dealight/business/manage/dealhistory?storeId=");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${storeId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\">핫딜 이력</a></div>\n");
      out.write("                        <div><a href=\"/dealight/business/\">매장 리스트</a></div>\n");
      out.write("                        <div id=\"store_info_box\">\n");
      out.write("                            <div class=\"store_info_tit\">매장 이름</div>\n");
      out.write("                            <div class=\"store_info_val\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${store.storeNm}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("</div>\n");
      out.write("                            <div class=\"store_info_tit\">매장 수용 인원</div>\n");
      out.write("                            <div class=\"store_info_val\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${store.bstore.acmPnum}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("</div>\n");
      out.write("                            <div class=\"store_info_tit\">매장 평균 식사 시간</div>\n");
      out.write("                            <div class=\"store_info_val\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${store.bstore.avgMealTm}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("</div>\t\n");
      out.write("                        </div>\n");
      out.write("                    </div>\n");
      out.write("                </div>\n");
      out.write("                <div class=\"board_right_wrapper\">\n");
      out.write("                    <div class=\"board_wrapper\"> <!-- board wrapper -->\n");
      out.write("                        <div class=\"board_top_box\"> <!-- top box -->\n");
      out.write("                            <div class=\"top_box_items light\"> \n");
      out.write("                                <span>영업 상태</span>\n");
      out.write("                                <form id=\"seatStusForm\" action=\"/dealight/business/manage/board/seat\"\n");
      out.write("                                        method=\"put\">\n");
      out.write("                                        <input name=\"seatStusColor\" id=\"color_value\" value=\"\" hidden>\n");
      out.write("                                        <input name=\"storeId\" value=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${storeId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\" hidden>\n");
      out.write("                                        <button class=\"btn_seat_stus green\" data-color=\"Green\"><i class=\"fas fa-circle\"></i></button>\n");
      out.write("                                        <button class=\"btn_seat_stus yellow\" data-color=\"Yellow\"><i class=\"fas fa-circle\"></i></button>\n");
      out.write("                                        <button class=\"btn_seat_stus red\" data-color=\"Red\"><i class=\"fas fa-circle\"></i></button>\n");
      out.write("                                </form>\n");
      out.write("                            </div> \n");
      out.write("                            <div class=\"top_box_items tab_nav\">\n");
      out.write("                                <div class=\"tab_items curTab\"><a class=\"switch switch_board\" id=\"switch_manage\">매장관리</a></div>\n");
      out.write("                                <div class=\"tab_items\"><a class=\"switch switch_rsvd_rslt\">현황판</a></div>\n");
      out.write("                            </div>\n");
      out.write("                            <div class=\"\">\n");
      out.write("\n");
      out.write("                            </div>\n");
      out.write("                        </div> <!-- end top box -->\n");
      out.write("            \n");
      out.write("                    <div id=\"rsvd_rslt_baord\" style=\"display : none\">\n");
      out.write("                        <div class=\"last_week_trend\">최근 7일 Trend</div>\n");
      out.write("                        <div class=\"chart_wrapper\"><canvas id=\"rsvd_chart\" style=\"font-weight:bold; height:30vh; width:50vw\"></canvas></div>\n");
      out.write("                        <div class=\"rsvdRslt\">\n");
      out.write("                                                \n");
      out.write("                        </div>\n");
      out.write("                        <!-- \n");
      out.write("                        <h1>최근 7일 예약 현황</h1>            \n");
      out.write("                        <div class=\"last_week_rsvd\"></div>\n");
      out.write("                        -->\n");
      out.write("                    </div>\n");
      out.write("            \n");
      out.write("                    <div id=\"board\">\n");
      out.write("                        <div class=\"board_left_box\">\n");
      out.write("                            <div class=\"next_wrapper\">\n");
      out.write("                                <div class=\"next_wait\">\n");
      out.write("                                    <span class=\"next_tit\">NEXT 웨이팅</span>\n");
      out.write("                                    <div class=\"next_info nextWait\">\n");
      out.write("\n");
      out.write("                                    </div>\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"next_rsvd\">\n");
      out.write("                                    <span class=\"next_tit\">NEXT 예약</span>\n");
      out.write("                                    <div class=\"next_info nextRsvd\">\n");
      out.write("\n");
      out.write("                                    </div>\n");
      out.write("                                </div>\n");
      out.write("                            </div>\n");
      out.write("                        </div> <!-- end left box -->\n");
      out.write("                        <div class=\"board_right_box\">\n");
      out.write("                            <div class=\"list_wrapper\">\n");
      out.write("                                <div class=\"wait_list_wrapper waitList\">\n");
      out.write("                                </div>\n");
      out.write("                                <div class=\"rsvd_list_wrapper rsvdList\">\n");
      out.write("                                </div>\n");
      out.write("                            </div>\n");
      out.write("                        </div> <!-- end right box -->\n");
      out.write("                    </div> <!-- end board wrapper -->\n");
      out.write("                </div> <!-- end board -->\n");
      out.write("            </div>\n");
      out.write("            </div>\n");
      out.write("                <div class=\"rsvd_time_bar\"><!-- rsvd time bar -->\n");
      out.write("                    \n");
      out.write("                </div> <!-- end rsvd time bar -->\n");
      out.write("            </div> <!-- end main box -->\n");
      out.write("        </main>\n");
      out.write("        \n");
      out.write("        \t<!-- The Modal -->\n");
      out.write("\t<div id=\"myModal\" class=\"modal\">\n");
      out.write("\t\t<!-- Modal content -->\n");
      out.write("\t\t<div class=\"modal-content\">\n");
      out.write("\t\t\t<span class=\"close_modal\"><i class=\"fas fa-times\"></i></span>\n");
      out.write("\t        <div class=\"modal_header\"></div>\n");
      out.write("\t\t\t<ul class=\"rsvdDtls\"></ul>\n");
      out.write("\t\t\t<ul class=\"userRsvdList\"></ul>\n");
      out.write("\t\t\t<ul class=\"waiting_registerForm\"></ul>\n");
      out.write("\t\t\t<div class=\"modal_wrapper_regwait content_div\"></div>\n");
      out.write("\t\t\t<div class=\"modal_wrapper_rsvdDtls content_div\"></div>\n");
      out.write("\t\t\t<div class='modal_wrapper_htdl_regform content_div'></div>\n");
      out.write("\t\t</div>\n");
      out.write("\t</div>\n");
      out.write("<script>\n");
      out.write("\n");
      out.write("const storeId = ");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${storeId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write(";\n");
      out.write("/* 정규식으로 파일 형식을 제한한다. */\n");
      out.write("const regex = new RegExp(\"(.*>)\\.(exe|sh|zip|alz)$\");\n");
      out.write("/*최대 파일 크기를 제어한다  */\n");
      out.write("const maxSize = 5242880; /* 5MB */\n");
      out.write("\n");
      out.write("const brch = '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${store.bstore.brch}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("';\n");
      out.write("/*시간바 만들기*/\n");
      out.write("/*현재시간으로 스크롤 고정*/\n");
      out.write("let writeTimeBar = function (curTime) {\n");
      out.write("        timeArr = ['','09:00','09:30','10:00','10:30','11:00','11:30','12:00'\n");
      out.write("            ,'12:30','13:00','13:30','14:00','14:30','15:00','15:30','16:00',\n");
      out.write("            '16:30','17:00','17:30','18:00','18:30','19:00','19:30','20:00','20:30','21:00','21:30','22:00'];\n");
      out.write("        let strTime = \"\";\n");
      out.write("        let curPos = 0; \n");
      out.write("        strTime += \"<div class='cur_time_mark'></div>\";\n");
      out.write("        for(let i = 1; i <= 27; i++){\n");
      out.write("            if(curTime === timeArr[i])\n");
      out.write("                curPos = i - 1;\n");
      out.write("            strTime += \"<div class='rsvd_time dealight_tooltip' id='slide-\"+i+\"'><div class='time_text_box'><span class='time_text'>\"+timeArr[i]+\"</span></div><div class='time_table'></div></div>\";\n");
      out.write("        }\n");
      out.write("        document.querySelector(\".rsvd_time_bar\").innerHTML = strTime;\n");
      out.write("        // 예약 상태바 초기 스크롤 고정\n");
      out.write("        document.querySelector(\".rsvd_time_bar\").scrollLeft = ((parseInt(curPos)*150) - 150);\n");
      out.write("        document.getElementsByClassName(\"cur_time_mark\")[0].style.left= ((parseInt(curPos)*150) + 30).toString() +'px';\n");
      out.write("        }\n");
      out.write("\n");
      out.write("    let curToday = new Date();\n");
      out.write("    let curHour = curToday.getHours(),\n");
      out.write("        curMinutes = curToday.getMinutes();\n");
      out.write("        \n");
      out.write("        if(curMinutes >= 30)\n");
      out.write("            curMinutes = '30';\n");
      out.write("        else\n");
      out.write("            curMinutes = '00';\n");
      out.write("        \n");
      out.write("        let curTime = curHour + \":\" + curMinutes;\n");
      out.write("\n");
      out.write("        // TimeBar 작성\n");
      out.write("        writeTimeBar(curTime);\n");
      out.write("\t\n");
      out.write("\t// 모달 선택\n");
      out.write("\tconst modal = $(\"#myModal\"),\n");
      out.write("\t\tclose = $(\".close_modal\"),\n");
      out.write("\t\tmodalContent = $(\".modal-content\"),\n");
      out.write("\t\tbtn_show_board = $(\"#btn_show_board\");\n");
      out.write("\n");
      out.write("\tclose.on(\"click\", (e) => {\n");
      out.write("\t\tmodal.css(\"display\",\"none\");\n");
      out.write("\t\tmodal.find(\"ul\").html(\"\");\n");
      out.write("\t\tmodal.find(\".content_div\").html(\"\");\n");
      out.write("\t\tmodal.find(\".content_div\").css(\"display\",\"none\");\n");
      out.write("\t});\n");
      out.write("\t\n");
      out.write("\twindow.onclick = function(e) {\n");
      out.write("\t\t\n");
      out.write("\t\t  if (e.target === document.getElementById('myModal')) {\n");
      out.write("\t\t\t  modal.css(\"display\",\"none\");\n");
      out.write("\t\t\t  modal.find(\"ul\").html(\"\");\n");
      out.write("\t\t\t  modal.find(\".content_div\").html(\"\");\n");
      out.write("\t\t\t  modal.find(\".content_div\").css(\"display\",\"none\");\n");
      out.write("\t\t  }\n");
      out.write("\t}\n");
      out.write("\t\n");
      out.write("    // esc 눌러서 모달 escape\n");
      out.write("    $(document).keyup(function(e) {\n");
      out.write("    \tif(e.key === \"Escape\"){\n");
      out.write("    \t\tmodal.css(\"display\",\"none\");\n");
      out.write("    \t\tmodal.find(\"ul\").html(\"\");\n");
      out.write("    \t\tmodal.find(\".content_div\").html(\"\");\n");
      out.write("    \t\tmodal.find(\".content_div\").css(\"display\",\"none\");\n");
      out.write("    \t}\n");
      out.write("    });\n");
      out.write("    \n");
      out.write("    \t$(\".alert_closebtn\").on(\"click\", \"svg\", e => {\n");
      out.write("    \t\tconsole.log(e.target);\n");
      out.write("    \t\tconsole.log(e.currentTarget);\n");
      out.write("    \t\tconsole.log(\"close btn click\");\n");
      out.write("    \t\t$(e.currentTarget).parent().parent().addClass(\"hide\");\n");
      out.write("    \t\t$(e.currentTarget).parent().parent().removeClass(\"show\");\n");
      out.write("    \t\t//setTimeout($(e.target).parent().removeClass(\"showAlert\"),5000); \t\n");
      out.write("    \t});\n");
      out.write("    \t\n");
      out.write("    \t$(\".alert_reject_btn\").on(\"click\", e => {\n");
      out.write("    \t\t$(\".alert.manage_htdl\").addClass(\"hide\");\n");
      out.write("    \t\t$(\".alert.manage_htdl\").removeClass(\"show\");\n");
      out.write("    \t});\n");
      out.write("    \t\n");
      out.write("\n");
      out.write("</script>\n");
      out.write("<script>\n");
      out.write("\n");
      out.write("    /*\n");
      out.write("    REST 방식으로 서버와 통신\n");
      out.write("    \t비동기로 board를 바꿔주는 서비스\n");
      out.write("    */\n");
      out.write("    let boardService = (() => {\n");
      out.write("      \n");
      out.write("    \t\n");
      out.write("        /*put 함수*/\n");
      out.write("        // 매장의 착석 상태 코드를 변경한다.\n");
      out.write("        function putChangeStatusCd(params,callback,error) {\n");
      out.write("        \t\n");
      out.write("        \tlet storeId = params.storeId,\n");
      out.write("        \t\tseatStusCd = params.seatStusCd;\n");
      out.write("        \t\n");
      out.write("            $.ajax({\n");
      out.write("                type:'put',\n");
      out.write("                url:'/dealight/business/manage/board/seat/'+storeId+'/'+seatStusCd,\n");
      out.write("                data : {},\n");
      out.write("                contentType : \"application/json\",\n");
      out.write("                success : function(result, status, xhr) {\n");
      out.write("                    if(callback) {\n");
      out.write("                        callback(result);\n");
      out.write("                    }\n");
      out.write("                },\n");
      out.write("                error : function(xhr, status, er) {\n");
      out.write("                    if(error) {\n");
      out.write("                        error(er);\n");
      out.write("                    }               \n");
      out.write("                }\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            }\n");
      out.write("    \t // 매장의 웨이팅 상태를 '노쇼'로 변경한다.\n");
      out.write("        function putNoshowWaiting(waitId,callback,error) {\n");
      out.write("            $.ajax({\n");
      out.write("                type:'put',\n");
      out.write("                url:'/dealight/business/manage/board/waiting/noshow/' + waitId,\n");
      out.write("                data : {waitId:waitId},\n");
      out.write("                contentType : \"application/json\",\n");
      out.write("                success : function(result, status, xhr) {\n");
      out.write("                    if(callback) {\n");
      out.write("                        callback(result);\n");
      out.write("                    }\n");
      out.write("                },\n");
      out.write("                error : function(xhr, status, er) {\n");
      out.write("                    if(error) {\n");
      out.write("                        error(er);\n");
      out.write("                    }               \n");
      out.write("                }\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            }\n");
      out.write("    \n");
      out.write("     \t// 매장의 웨이팅 상태를 '입장'으로 변경한다.\n");
      out.write("        function putEnterWaiting(waitId,callback,error) {\n");
      out.write("    \n");
      out.write("            $.ajax({\n");
      out.write("                type:'put',\n");
      out.write("                url:'/dealight/business/manage/board/waiting/enter/' + waitId,\n");
      out.write("                data : {waitId:waitId},\n");
      out.write("                contentType : \"application/json\",\n");
      out.write("                success : function(result, status, xhr) {\n");
      out.write("                    if(callback) {\n");
      out.write("                        callback(result);\n");
      out.write("                    }\n");
      out.write("                },\n");
      out.write("                error : function(xhr, status, er) {\n");
      out.write("                    if(error) {\n");
      out.write("                        error(er);\n");
      out.write("                    }               \n");
      out.write("                }\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            }\n");
      out.write("    \t\n");
      out.write("     \t// 매장의 웨이팅 상태를 '취소'로 변경한다.\n");
      out.write("        function putCancelWaiting(waitId,callback,error) {\n");
      out.write("    \n");
      out.write("            $.ajax({\n");
      out.write("                type:'put',\n");
      out.write("                url:'/dealight/business/manage/board/waiting/cancel/' + waitId,\n");
      out.write("                data : {waitId:waitId},\n");
      out.write("                contentType : \"application/json\",\n");
      out.write("                success : function(result, status, xhr) {\n");
      out.write("                    if(callback) {\n");
      out.write("                        callback(result);\n");
      out.write("                    }\n");
      out.write("                },\n");
      out.write("                error : function(xhr, status, er) {\n");
      out.write("                    if(error) {\n");
      out.write("                        error(er);\n");
      out.write("                    }               \n");
      out.write("                }\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("        }\n");
      out.write("    \n");
      out.write("        /*get 함수*/\n");
      out.write("        // 예약의 '예약상세'를 가져온다.\n");
      out.write("        function getRsvdDtls(param,callback,error) {\n");
      out.write("        \t\n");
      out.write("        \tlet rsvdId = param.rsvdId;\n");
      out.write("        \t\n");
      out.write("        \t$.getJSON(\"/dealight/business/manage/board/reservation/dtls/\" + rsvdId + \".json\",\n");
      out.write("        \t\tfunction(data) {\n");
      out.write("        \t\t\tif(callback) {\n");
      out.write("        \t\t\t\tcallback(data);\n");
      out.write("        \t\t\t}\n");
      out.write("        \t}).fail(function(xhr,status,err){\n");
      out.write("        \t\tif(error) {\n");
      out.write("        \t\t\terror();\n");
      out.write("        \t\t}\n");
      out.write("        \t});\n");
      out.write("        \t\n");
      out.write("        }\n");
      out.write("        \n");
      out.write("     \t// 사용자의 '해당 매장'의 '예약 리스트'를 가져온다.\n");
      out.write("\t\tfunction getUserRsvdList(param,callback,error) {\n");
      out.write("        \t\n");
      out.write("        \tlet storeId = param.storeId,\n");
      out.write("        \t\tuserId = param.userId;\n");
      out.write("        \t\n");
      out.write("        \t//console.log(storeId);\n");
      out.write("        \t//console.log(userId);\n");
      out.write("        \t\n");
      out.write("        \t$.getJSON(\"/dealight/business/manage/board/reservation/list/\" + storeId +\"/\" + userId + \".json\",\n");
      out.write("        \t\tfunction(data) {\n");
      out.write("        \t\t\tif(callback) {\n");
      out.write("        \t\t\t\tcallback(data);\n");
      out.write("        \t\t\t}\n");
      out.write("        \t}).fail(function(xhr,status,err){\n");
      out.write("        \t\tif(error) {\n");
      out.write("        \t\t\terror();\n");
      out.write("        \t\t}\n");
      out.write("        \t});\n");
      out.write("        \t\n");
      out.write("        }\n");
      out.write("        \n");
      out.write("        // 매장의 '예약 현황판' 내용을 가져온다.\n");
      out.write("\t\tfunction getRsvdRslt(param,callback,error) {\n");
      out.write("            \n");
      out.write("            let storeId = param.storeId;\n");
      out.write("            \n");
      out.write("            $.getJSON(\"/dealight/business/manage/board/reservation/rslt/\"+storeId+\".json\",\n");
      out.write("                function(data){\n");
      out.write("                        if(callback){\n");
      out.write("                            callback(data);\n");
      out.write("                        }\n");
      out.write("                    }).fail(function(xhr,status,err){\n");
      out.write("                        if(error){\n");
      out.write("                            error();\n");
      out.write("                        }\n");
      out.write("            });\n");
      out.write("        }\n");
      out.write("        \n");
      out.write("        // '해당 매장'의 '예약 리스트'를 가져온다.\n");
      out.write("        function getRsvdList(param,callback,error) {\n");
      out.write("            \n");
      out.write("            let storeId = param.storeId;\n");
      out.write("            \n");
      out.write("            let rsvdList = $.getJSON(\"/dealight/business/manage/board/reservation/\"+storeId+\".json\",\n");
      out.write("                function(data){\n");
      out.write("                        if(callback){\n");
      out.write("                            callback(data);\n");
      out.write("                        }\n");
      out.write("                    }).fail(function(xhr,status,err){\n");
      out.write("                        if(error){\n");
      out.write("                            error();\n");
      out.write("                        }\n");
      out.write("            });\n");
      out.write("    \t\n");
      out.write("            \n");
      out.write("            return rsvdList;\n");
      out.write("        }\n");
      out.write("    \n");
      out.write("        // '해당 매장'의 '웨이팅 리스트'를 가져온다.\n");
      out.write("        function getWaitList(param,callback,error) {\n");
      out.write("            \n");
      out.write("            let storeId = param.storeId;\n");
      out.write("            \n");
      out.write("            let waitList = $.getJSON(\"/dealight/business/manage/board/waiting/\"+storeId+\".json\",\n");
      out.write("                function(data){\n");
      out.write("                        if(callback){\n");
      out.write("                            callback(data);\n");
      out.write("                        }\n");
      out.write("                    }).fail(function(xhr,status,err){\n");
      out.write("                        if(error){\n");
      out.write("                            error();\n");
      out.write("                        }\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            return waitList;\n");
      out.write("        }\n");
      out.write("    \n");
      out.write("        // '매장'의 정보를 가져온다.\n");
      out.write("        function getStore(param,callback,error) {\n");
      out.write("            \n");
      out.write("            let storeId = param.storeId;\n");
      out.write("    \n");
      out.write("            $.getJSON(\"/dealight/business/manage/board/store/\"+storeId+\".json\",\n");
      out.write("                    function(data){\n");
      out.write("                        if(callback){\n");
      out.write("                            callback(data);\n");
      out.write("                        }\n");
      out.write("                    }).fail(function(xhr,status,err){\n");
      out.write("                        if(error){\n");
      out.write("                            error();\n");
      out.write("                        }\n");
      out.write("            });\n");
      out.write("        }\n");
      out.write("        \n");
      out.write("        // '웨이팅 리스트'에서 '다음 웨이팅'을 가져온다.\n");
      out.write("        function getNextWait(waitList){\n");
      out.write("            if(!waitList){\n");
      out.write("                return;\n");
      out.write("            }\n");
      out.write("                       \n");
      out.write("            return waitList.filter(wait =>  wait.waitStusCd === 'W')\n");
      out.write("                    .sort((w1,w2) =>  w1.waitId - w2.waitId)[0];\n");
      out.write("        };\n");
      out.write("        \n");
      out.write("        // 오늘의 예약을 '시간대 별'로 가져온다.\n");
      out.write("        function getTodayRsvdMap(param,callback,error){\n");
      out.write("      \n");
      out.write("        \tlet storeId = param.storeId;\n");
      out.write("        \t\n");
      out.write("        \t$.getJSON(\"/dealight/business/manage/board/reservation/map/\"+ storeId +\".json\",\n");
      out.write("                    function(data){\n");
      out.write("                        if(callback){\n");
      out.write("                            callback(data);\n");
      out.write("                        }\n");
      out.write("                    }).fail(function(xhr,status,err){\n");
      out.write("                        if(error){\n");
      out.write("                            error();\n");
      out.write("                        }\n");
      out.write("            });\n");
      out.write("\n");
      out.write("        };\n");
      out.write("        \n");
      out.write("        // 오늘의 시간대 별 예약 상태를 가져온다.\n");
      out.write("        function getTodayRsvdStusMap(param,callback,error){\n");
      out.write("      \n");
      out.write("        \tlet storeId = param.storeId;\n");
      out.write("        \t\n");
      out.write("        \t$.getJSON(\"/dealight/business/manage/board/reservation/stusmap/\"+ storeId +\".json\",\n");
      out.write("                    function(data){\n");
      out.write("                        if(callback){\n");
      out.write("                            callback(data);\n");
      out.write("                        }\n");
      out.write("                    }).fail(function(xhr,status,err){\n");
      out.write("                        if(error){\n");
      out.write("                            error();\n");
      out.write("                        }\n");
      out.write("            });\n");
      out.write("\n");
      out.write("        };\n");
      out.write("        \n");
      out.write("        // 해당 매장의 다음 웨이팅을 가져온다.\n");
      out.write("        function getNextRsvd(param,callback,error){\n");
      out.write("        \t\n");
      out.write("        \t\n");
      out.write("        \tlet storeId = param.storeId;\n");
      out.write("        \t\n");
      out.write("        \t\n");
      out.write("        \t$.getJSON(\"/dealight/business/manage/board/reservation/next/\"+ storeId +\".json\",\n");
      out.write("                    function(data){\n");
      out.write("                        if(callback){\n");
      out.write("                            callback(data);\n");
      out.write("                        }\n");
      out.write("                    }).fail(function(xhr,status,err){\n");
      out.write("                        if(error){\n");
      out.write("                            error();\n");
      out.write("                        }\n");
      out.write("            });\n");
      out.write("        };\n");
      out.write("        \n");
      out.write("        // 매장의 '지난 7일 웨이팅 현황' 내용을 가져온다.\n");
      out.write("\t\tfunction getLastWeekWait(param,callback,error) {\n");
      out.write("            \n");
      out.write("            let storeId = param.storeId;\n");
      out.write("            \n");
      out.write("            $.getJSON(\"/dealight/business/manage/board/waiting/rslt/\"+storeId+\"/list.json\",\n");
      out.write("                function(data){\n");
      out.write("                        if(callback){\n");
      out.write("                            callback(data);\n");
      out.write("                        }\n");
      out.write("                    }).fail(function(xhr,status,err){\n");
      out.write("                        if(error){\n");
      out.write("                            error();\n");
      out.write("                        }\n");
      out.write("            });\n");
      out.write("        };\n");
      out.write("    \n");
      out.write("        // 웨이팅 정보를 등록한다.\n");
      out.write("        function regWait(wait, callback,error) {\n");
      out.write("    \n");
      out.write("            $.ajax({\n");
      out.write("                type : 'post',\n");
      out.write("                url : '/dealight/business/manage/board/waiting/new',\n");
      out.write("                data : JSON.stringify(wait),\n");
      out.write("                contentType : \"application/json; charset=utf-8\",\n");
      out.write("                success : function(result, status, xhr) {\n");
      out.write("                    if(callback) {\n");
      out.write("                        callback(result);\n");
      out.write("                    }\n");
      out.write("                },\n");
      out.write("                error : function(xhr, status, er) {\n");
      out.write("                    if(error) {\n");
      out.write("                        error(er);\n");
      out.write("                    }               \n");
      out.write("                }\n");
      out.write("            })\n");
      out.write("        }\n");
      out.write("        \n");
      out.write("        // 핫딜 정보를 등록한다.\n");
      out.write("        function regHtdl(wait, callback,error) {\n");
      out.write("    \n");
      out.write("            $.ajax({\n");
      out.write("                type : 'post',\n");
      out.write("                url : '/dealight/business/manage/board/htdl/new',\n");
      out.write("                data : JSON.stringify(wait),\n");
      out.write("                contentType : \"application/json; charset=utf-8\",\n");
      out.write("                success : function(result, status, xhr) {\n");
      out.write("                    if(callback) {\n");
      out.write("                        callback(result);\n");
      out.write("                    }\n");
      out.write("                },\n");
      out.write("                error : function(xhr, status, er) {\n");
      out.write("                    if(error) {\n");
      out.write("                        error(er);\n");
      out.write("                    }               \n");
      out.write("                }\n");
      out.write("            })\n");
      out.write("        }\n");
      out.write("        \n");
      out.write("        // '해당 매장'의 지난주 예약 정보를 가져온다.\n");
      out.write("        function getLastWeekRsvd(param, callback,error) {\n");
      out.write("        \t\n");
      out.write("\t\t\tlet storeId = param.storeId;\n");
      out.write("        \t\n");
      out.write("        \t$.getJSON(\"/dealight/business/manage/board/reservation/rslt/\"+ storeId +\"/list.json\",\n");
      out.write("                    function(data){\n");
      out.write("        \t\t\t\t\tconsole.log(data);\n");
      out.write("                        if(callback){\n");
      out.write("                            callback(data);\n");
      out.write("                        }\n");
      out.write("                    }).fail(function(xhr,status,err){\n");
      out.write("                        if(error){\n");
      out.write("                            error();\n");
      out.write("                        }\n");
      out.write("            });\n");
      out.write("        };\n");
      out.write("        \n");
      out.write("        function getMenuList(param,callback,error) {\n");
      out.write("        \t\n");
      out.write("        \tlet storeId = param.storeId;\n");
      out.write("        \t\n");
      out.write("        \t$.getJSON(\"/dealight/business/manage/board/menus/\"+ storeId +\".json\",\n");
      out.write("                    function(data){\n");
      out.write("        \t\t\t\t\tconsole.log(data);\n");
      out.write("                        if(callback){\n");
      out.write("                            callback(data);\n");
      out.write("                        }\n");
      out.write("                    }).fail(function(xhr,status,err){\n");
      out.write("                        if(error){\n");
      out.write("                            error();\n");
      out.write("                        }\n");
      out.write("            });\n");
      out.write("        \t\n");
      out.write("        }\n");
      out.write("        \n");
      out.write("    \n");
      out.write("        return {\n");
      out.write("            regWait:regWait,\n");
      out.write("            regHtdl:regHtdl,\n");
      out.write("            getStore : getStore,\n");
      out.write("            getWaitList : getWaitList,\n");
      out.write("            getRsvdList : getRsvdList,\n");
      out.write("            putCancelWaiting : putCancelWaiting,\n");
      out.write("            putNoshowWaiting : putNoshowWaiting,\n");
      out.write("            putEnterWaiting : putEnterWaiting,\n");
      out.write("            putChangeStatusCd : putChangeStatusCd,\n");
      out.write("            getNextWait : getNextWait,\n");
      out.write("            getNextRsvd : getNextRsvd,\n");
      out.write("            getTodayRsvdMap : getTodayRsvdMap,\n");
      out.write("            getTodayRsvdStusMap : getTodayRsvdStusMap,\n");
      out.write("            getRsvdRslt : getRsvdRslt,\n");
      out.write("            getLastWeekWait : getLastWeekWait,\n");
      out.write("            getUserRsvdList : getUserRsvdList,\n");
      out.write("            getRsvdDtls : getRsvdDtls,\n");
      out.write("            getLastWeekRsvd : getLastWeekRsvd,\n");
      out.write("            getMenuList : getMenuList\n");
      out.write("        };\n");
      out.write("    })();\n");
      out.write("    \n");
      out.write("    \n");
      out.write("    /*\n");
      out.write("    \t서버가 시작 되면 동작하는 코드\n");
      out.write("    */\n");
      out.write("    $(document).ready(() => {\n");
      out.write("    \t/* 변수 설정*/\n");
      out.write("        \n");
      out.write("        /* HTML 태그 변수 설정*/\n");
      out.write("        const seatStusForm = $(\"#seatStusForm\"),\n");
      out.write("\t        colorVal = $(\"#color_value\"),\n");
      out.write("\t        storeInfoDiv = $(\".store_info_cnts\"),\n");
      out.write("\t        rsvdListDiv = $(\".rsvdList\"),\n");
      out.write("\t        waitListDiv = $(\".waitList\"),\n");
      out.write("\t        nextWaitDiv = $(\".nextWait\"),\n");
      out.write("\t        nextRsvdDiv = $(\".nextRsvd\"),\n");
      out.write("\t        rsvdMapUL = $(\".rsvdMap\"),\n");
      out.write("\t        storeSeatUL = $(\".storeSeatStus\"),\n");
      out.write("\t        rsvdRsltDiv = $(\".rsvdRslt\"),\n");
      out.write("\t        userRsvdListUL = $(\".userRsvdList\"),\n");
      out.write("\t        rsvdDtlsDiv = $(\".modal_wrapper_rsvdDtls\"),\n");
      out.write("\t        rsvdDtlsInfoDiv = $(\"#modal_rsvd_dtls\"),\n");
      out.write("\t        userRsvdListDiv = $(\".modal_bot_rsvd\"),\n");
      out.write("\t        waitRegFormDiv = $(\".modal_wrapper_regwait\"),\n");
      out.write("\t        lastWeekRsvdUL = $(\".last_week_rsvd\"),\n");
      out.write("\t        regHtdlFormDiv = $(\".modal_wrapper_htdl_regform\"),\n");
      out.write("\t        btnAcceptHtdl = $(\".btnAcceptHtdl\")\n");
      out.write("\t        \n");
      out.write("        ;\n");
      out.write("        \n");
      out.write("        function init(storeId){\n");
      out.write("            showBoard(storeId); // 현재 '매장'의 'board'를 보여주는 코드\n");
      out.write("            showTime(); // 현재 시간을 보여주는 코드\n");
      out.write("            setInterval(showTime, 1000); // 매초 update\n");
      out.write("            console.log(\"get rsvd list...............\");\n");
      out.write("        }\n");
      out.write("            \n");
      out.write("        init(storeId);\n");
      out.write("        \n");
      out.write("        /*\n");
      out.write("        \t매장의\n");
      out.write("        \tboard를 보여준다.\n");
      out.write("        \t매장 정보\n");
      out.write("        \t웨이팅 리스트\n");
      out.write("        \t예약 리스트\n");
      out.write("        \t시간대별 예약 리스트\n");
      out.write("        \t다음 예약, 다음 웨이팅\n");
      out.write("        */\n");
      out.write("        \n");
      out.write("        function showStoreInfo (storeId){\n");
      out.write("        \t\n");
      out.write("        \tboardService.getStore({storeId : storeId}, function (store) {\n");
      out.write("                let strStoreInfo = \"\";\n");
      out.write("                if(store == null){\n");
      out.write("                \tstoreInfoDiv.html(\"\");\n");
      out.write("                    return;\n");
      out.write("                }\n");
      out.write("                \n");
      out.write("                strStoreInfo += \"<div class='store_info_items'>매장 이름 : \" + store.storeNm + \"</div>\";\n");
      out.write("                strStoreInfo += \"<div class='store_info_items'>매장 연락처 : \" + store.telno + \"</div>\";\n");
      out.write("                strStoreInfo += \"<div class='store_info_items'>매장 수용 인원 : \" + store.bstore.acmPnum + \"</div>\";\n");
      out.write("                strStoreInfo += \"<div class='store_info_items'>매장 소개 : \" + store.bstore.storeIntro + \"</div>\";\n");
      out.write("                strStoreInfo += \"<div class='store_info_items'>매장 평균식사시간 : \" + store.bstore.acmPnum + \"분</div>\";\n");
      out.write("                strStoreInfo += \"<div class='store_info_items'>매장 라스트오더시간 : \" + store.bstore.lastOrdTm + \"</div>\";\n");
      out.write("                \n");
      out.write("                storeInfoDiv.html(strStoreInfo);\n");
      out.write("                \n");
      out.write("                /*착석 상태*/\n");
      out.write("                let colors = document.getElementsByClassName(\"btn_seat_stus\");\n");
      out.write("                for(let i = 0; i < colors.length; i++){\n");
      out.write("                \tif(colors[i].dataset.color[0] === store.bstore.seatStusCd)\n");
      out.write("                \t\tcolors[i].className += \" curStus\";\n");
      out.write("                }\n");
      out.write("        \t})\n");
      out.write("        };\n");
      out.write("        \n");
      out.write("        function showWaitList(storeId){\n");
      out.write("        \t\n");
      out.write("        \tconsole.log(\"show wait list..........\" + storeId);\n");
      out.write("        \t\n");
      out.write("        \tboardService.getWaitList({storeId:storeId}, function (waitList) {\n");
      out.write("                let strWaitList = \"\";\n");
      out.write("                if(waitList == null){\n");
      out.write("                    waitList.html(\"\");\n");
      out.write("                    return;\n");
      out.write("                }\n");
      out.write("                strWaitList += \"<span class='wait_list_tit'>웨이팅 리스트</span>\";\n");
      out.write("                waitList.forEach(wait => {\n");
      out.write("                \tstrWaitList += \"<div class='wait' data-waitId='\"+wait.waitId+\"'>\";\n");
      out.write("                        strWaitList += \"<div class='list_info_top'>\";\n");
      out.write("                        strWaitList += \"<span class='wait_name wait_list'>\"+wait.custNm+\"</span>\";\n");
      out.write("                        strWaitList += \"<span class='wait_telno wait_list'>\"+wait.custTelno+\"<button class='btn_wait_call'><a href='/oauth?storeId=\"+wait.storeId+\"&waitId=\"+wait.waitId+\"'><i class='fas fa-comment-dots'></i></a></button></span>\";\n");
      out.write("                        strWaitList += \"</div>\";\n");
      out.write("                        strWaitList += \"<div class='list_info_bot'>\";\n");
      out.write("                        strWaitList += \"<span class='list_wait_pnum'>\"+wait.waitPnum+\"명</span>\";\n");
      out.write("                        let parStr = wait.waitRegTm.split(\" \")[1].split(\":\");\n");
      out.write("      \t              \tlet time = parStr[0] + \":\" + parStr[1];\n");
      out.write("                        strWaitList += \"<span class='list_wait_regtm'>\"+time+\"</span>\";\n");
      out.write("                        strWaitList += \"</div>\";\n");
      out.write("                    \tstrWaitList += \"</div>\";\n");
      out.write("                });\n");
      out.write("    \n");
      out.write("              waitListDiv.html(strWaitList);   \n");
      out.write("             \n");
      out.write("              $(\".wait\").on(\"click\",(e)=>{\n");
      out.write("            \t  \n");
      out.write("            \t  console.log(e.target);\n");
      out.write("            \t  \n");
      out.write("            \t  let waitId = e.target.dataset.waitid\n");
      out.write("            \t  \n");
      out.write("            \t  if(e.target.className === \"btn_wait_call\" || e.target.parentNode.className === \"btn_wait_call\")\n");
      out.write("            \t\t  return;\n");
      out.write("            \t  \n");
      out.write("            \t  console.log(\"wait1 : \"+waitId);\n");
      out.write("            \t  \n");
      out.write("            \t  if(e.target.dataset.waitId) waitId = e.target.dataset.waitid;\n");
      out.write("            \t  \n");
      out.write("            \t  console.log(\"wait2 : \"+waitId);\n");
      out.write("            \t  \n");
      out.write("                  if(e.target.parentNode.dataset.waitid) waitId = e.target.parentNode.dataset.waitid;\n");
      out.write("                  \n");
      out.write("                  console.log(\"wait3 : \"+waitId);\n");
      out.write("                  \n");
      out.write("                  if(e.target.parentNode.parentNode.dataset.waitid) waitId = e.target.parentNode.parentNode.dataset.waitid;\n");
      out.write("                  \n");
      out.write("                  console.log(\"wait4 : \"+waitId);\n");
      out.write("            \t  \n");
      out.write("                  window.open(\"/dealight/waiting/\"+waitId);\n");
      out.write("            \t  \n");
      out.write("              });\n");
      out.write("              \n");
      out.write("              \n");
      out.write("              let nextWait = boardService.getNextWait(waitList);\n");
      out.write("              \n");
      out.write("              let strNextWait = \"\";\n");
      out.write("              \n");
      out.write("              if(nextWait){\n");
      out.write("\t              strNextWait += \"<div class='next_info_top'>\";\n");
      out.write("\t              strNextWait += \"<span class='wait_name' data-id='\"+nextWait.waitId+\"'>\"+nextWait.custNm+\"</span>\"\n");
      out.write("\t              strNextWait += \"<span class='wait_telno'>\"+nextWait.custTelno+\"</span>\";\n");
      out.write("\t              strNextWait += \"</div>\";\n");
      out.write("\t              strNextWait += \"<div class='next_info_bot'>\";\n");
      out.write("\t              strNextWait += \"<div class='next_wait_pnum'>\"+nextWait.waitPnum+\"명</div>\";\n");
      out.write("\t              let parStr = nextWait.waitRegTm.split(\" \")[1].split(\":\");\n");
      out.write("\t              let time = parStr[0] + \":\" + parStr[1];\n");
      out.write("\t              strNextWait += \"<div class='next_wait_regtm'>\"+time+\"</div>\";\n");
      out.write("\t              strNextWait += \"</div>\";\n");
      out.write("\t              strNextWait += \"<div class='next_wait_btn_box'>\";\n");
      out.write("\t              strNextWait += \"<button class='btn_enter_wait'>입장</button>\";\n");
      out.write("\t              strNextWait += \"<button class='btn_noshow_wait'>노쇼</button>\";\n");
      out.write("\t              strNextWait += \"</div>\";\n");
      out.write("              }\n");
      out.write("              nextWaitDiv.html(strNextWait);\n");
      out.write("              \n");
      out.write("              $(\".btn_enter_wait\").on(\"click\", waitEnterHandler);\n");
      out.write("              $(\".btn_noshow_wait\").on(\"click\", waitNoshowHandler);\n");
      out.write("    \n");
      out.write("            }); \n");
      out.write("        }\n");
      out.write("        \n");
      out.write("        function showRsvdList(storeId){\n");
      out.write("        \t\n");
      out.write("        \tconsole.log(\"show rsvd list...........\" + storeId);\n");
      out.write("        \t\n");
      out.write("        \tboardService.getRsvdList({storeId:storeId}, function (rsvdList) {\n");
      out.write("                let strRsvdList = \"\";\n");
      out.write("                if(rsvdList == null){\n");
      out.write("                    rsvdList.html(\"\");\n");
      out.write("                    return;\n");
      out.write("                }\n");
      out.write("                console.log(\"===============================\");\n");
      out.write("                strRsvdList += \"<span class='rsvd_list_tit'>예약 리스트</span>\";\n");
      out.write("                \n");
      out.write("                rsvdList.forEach(rsvd => {\n");
      out.write("                \tif(rsvd.htdlId == null) strRsvdList += \"<div class='rsvd rsvd_i btnRsvd'>\" ;\n");
      out.write("                \telse strRsvdList += \"<div class='rsvd rsvd_i cur_htdl btnRsvd'>\" ;\n");
      out.write("                \t\tstrRsvdList += \"<li hidden class='btnStoreId'>\"+rsvd.storeId+\"</li>\";\n");
      out.write("                \t\tstrRsvdList += \"<li hidden class='btnUserId'>\"+rsvd.userId+\"</li>\";\n");
      out.write("                \t\tstrRsvdList += \"<div class='list_info_top'>\";\n");
      out.write("                \t\tstrRsvdList += \"<div class='rsvd_name rsvd_list'>\"+rsvd.userId+\"</div>\";\n");
      out.write("                \t\tstrRsvdList += \"<div class='rsvd_telno rsvd_list'>\"+rsvd.totQty+\"</div>\";\n");
      out.write("                \t\tstrRsvdList += \"</div>\";\n");
      out.write("                \t\tstrRsvdList += \"<div class='list_info_bot rsvd_list'>\";\n");
      out.write("                \t\tstrRsvdList += \"<div class='list_rsvd_pnum'>\"+rsvd.pnum+\"명</div>\";\n");
      out.write("                \t\tlet parStr = rsvd.time.split(\" \")[1].split(\":\");\n");
      out.write("      \t              \tlet time = parStr[0] + \":\" + parStr[1];\n");
      out.write("                \t\tstrRsvdList += \"<div class='list_rsvd_regtm'>\"+time+\"</div>\";\n");
      out.write("                \t\tstrRsvdList += \"</div></div>\";\n");
      out.write("                });\n");
      out.write("    \n");
      out.write("              rsvdListDiv.html(strRsvdList);\n");
      out.write("              $(\".btnRsvd\").on(\"click\", showUserRsvdListHandler);\n");
      out.write("              \n");
      out.write("            }); \n");
      out.write("        }\n");
      out.write("        \n");
      out.write("        function showRsvdMap(storeId){\n");
      out.write("        \t\n");
      out.write("\t\t\tstrRsvdMap = \"\";\n");
      out.write("            \n");
      out.write("            boardService.getTodayRsvdMap({storeId:storeId}, function(map){\n");
      out.write("            \tlet strRsvdMap = \"\";\n");
      out.write("            \t\n");
      out.write("            \tconsole.log(\"map..............................\"+map);\n");
      out.write("            \t\n");
      out.write("            \tif(!map)\n");
      out.write("            \t\treturn;\n");
      out.write("            \tObject.entries(map).forEach(([key,value]) => {\n");
      out.write("            \t\tconsole.log(\"key : \"+key+\", value : \" + value);\n");
      out.write("            \t\tstrRsvdMap += \"<li class='dealight_tooltip'>\"+key + \" : 예약번호[\" + value+\"] <span class='dealight_tooltiptext'>\"+value+\"번호 상세보기</span></li></br>\";\n");
      out.write("            \t\tfor(let i = 1; i < 28; i ++){\n");
      out.write("            \t\t\t// debug\n");
      out.write("            \t\t\tconsole.log(key+' : '+i+ ' : '+document.querySelector(\"#slide-\"+i).textContent);\n");
      out.write("            \t\t\tconsole.log(key === document.querySelector(\"#slide-\"+i).textContent);\n");
      out.write("            \t\t\tif(key === document.querySelector(\"#slide-\"+i).textContent){\n");
      out.write("            \t\t\t\tlet strHtml = \"\";\n");
      out.write("            \t\t\t\tlet strVal = value.toString();\n");
      out.write("            \t\t\t\t\n");
      out.write("            \t\t\t\tconsole.log(\"strVal : \" + strVal);\n");
      out.write("            \t\t\t\tlet parVal = strVal.split(\",\");\n");
      out.write("            \t\t\t\tlet ppVal = parVal[parVal.length - 1].split(\" \");\n");
      out.write("            \t\t\t\tparVal[parVal.length-1] = ppVal[0];\n");
      out.write("            \t\t\t\t\n");
      out.write("            \t\t\t\tstrHtml += \"<span class='dealight_tooltiptext'>\";\n");
      out.write("            \t\t\t\tfor(let i = 0; i < parVal.length; i++){\n");
      out.write("            \t\t\t\t\tif(i !== parVal.length -1) strHtml += \"<span class='time_table_rsvd_dtls'>\"+parVal[i]+'</span>,';\n");
      out.write("            \t\t\t\t\tif(i === parVal.length -1) strHtml += \"<span class='time_table_rsvd_dtls'>\"+parVal[i]+'</span>';\n");
      out.write("            \t\t\t\t}\n");
      out.write("            \t\t\t\tstrHtml += \" 번호 예약</span>\";\n");
      out.write("            \t\t\t\tdocument.querySelector('#slide-'+i+' .time_table').innerHTML = strHtml;\n");
      out.write("            \t\t\t\tdocument.querySelector('#slide-'+i+' .time_table').style.backgroundColor = 'rgba(37, 201, 89, 0.911)';\n");
      out.write("            \t\t\t}\n");
      out.write("            \t\t}\n");
      out.write("            \t})\n");
      out.write("            \t\n");
      out.write("            \tboardService.getTodayRsvdStusMap({storeId:storeId},function(map){\n");
      out.write("            \t\tObject.entries(map).forEach(([key,value]) => {\n");
      out.write("                \t\tconsole.log(\"key : \"+key+\", value : \" + value);\n");
      out.write("                \t\tfor(let i = 1; i < 28; i ++){\n");
      out.write("                \t\t\tif(key === document.querySelector(\"#slide-\"+i).textContent){\n");
      out.write("                \t\t\t\tif(value === 'R')\n");
      out.write("                \t\t\t\t\tdocument.querySelector('#slide-'+i+' .time_table').style.backgroundColor = '#d32323';\n");
      out.write("                \t\t\t\telse if(value === 'Y')\n");
      out.write("                \t\t\t\t\tdocument.querySelector('#slide-'+i+' .time_table').style.backgroundColor = 'rgba(248, 236, 73, 0.781)';\n");
      out.write("                \t\t\t\telse if(value === 'G')\n");
      out.write("                \t\t\t\t\tdocument.querySelector('#slide-'+i+' .time_table').style.backgroundColor = 'rgba(125, 255, 164, 0.698)';\n");
      out.write("                \t\t\t\telse if(value === 'B')\n");
      out.write("                \t\t\t\t\tdocument.querySelector('#slide-'+i+' .time_table').style.backgroundColor = '#29242460';\n");
      out.write("                \t\t\t\telse\n");
      out.write("                \t\t\t\t\tdocument.querySelector('#slide-'+i+' .time_table').style.backgroundColor = 'rgba(37, 201, 89, 0.911)';\n");
      out.write("                \t\t\t}\n");
      out.write("                \t\t}\n");
      out.write("                \t});\n");
      out.write("            \t})\n");
      out.write("            \t\n");
      out.write("            \trsvdMapUL.html(strRsvdMap);\n");
      out.write("                \n");
      out.write("                \n");
      out.write("                $(\".time_table_rsvd_dtls\").on(\"click\", function(e) {\n");
      out.write("                \tlet rsvdId = $(e.target).text();\n");
      out.write("                \t\n");
      out.write("                \tconsole.log(\"rsvd id : \" + rsvdId);\n");
      out.write("                \t\n");
      out.write("                \tboardService.getRsvdDtls({rsvdId:rsvdId}, rsvd=>{\n");
      out.write("                \t\tconsole.log(\"rsvd id : \" + rsvd.rsvdId);\n");
      out.write("                \t\tlet userId = rsvd.userId;\n");
      out.write("                \t\tconsole.log(\"user id : \" + userId);\n");
      out.write("                \t\tlet storeId = rsvd.storeId;\n");
      out.write("                \t\tconsole.log(\"store id : \" + storeId);\n");
      out.write("                \t\tshowUserRsvdList(storeId,userId);\n");
      out.write("\t            \t\t\n");
      out.write("\t            \t\tmodal.css(\"display\",\"block\");\n");
      out.write("                \t})\n");
      out.write("            \t\n");
      out.write("            \t});\n");
      out.write("            \t\n");
      out.write("            });\n");
      out.write("            \n");
      out.write("            boardService.getNextRsvd({storeId:storeId},function(rsvd){\n");
      out.write("            \t\n");
      out.write("            \tconsole.log(\"get next rsvd .......................\");\n");
      out.write("            \t\n");
      out.write("        \t\tlet strNextRsvd = \"\";\n");
      out.write("        \t\tif(!rsvd)\n");
      out.write("        \t\t\treturn;\n");
      out.write("        \t\tstrNextRsvd += \"<div class='next_info_top'>\";\n");
      out.write("        \t\tstrNextRsvd += \"<span class='next_rsvd_name'>\"+rsvd.userId+\"</span>\";\n");
      out.write("        \t\tif(rsvd.htdlId !== null) strNextRsvd += \"<span class='next_rsvd_telno'>\"+\"<i class='fas fa-burn'></i>\"+\"핫딜 예약\"+\"</span>\";\n");
      out.write("        \t\telse if(rsvd.htdlId === null) strNextRsvd += \"<span class='next_rsvd_telno'>\"+\"일반 예약\"+\"</span>\";\n");
      out.write("        \t\tstrNextRsvd += \"<span class='store_htdl' style='display:none;'>\"+rsvd.htdlId+\"</span>\";\n");
      out.write("        \t\tstrNextRsvd += \"</div>\";\n");
      out.write("        \t\tstrNextRsvd += \"<div class='next_info_bot'>\";\n");
      out.write("        \t\tstrNextRsvd += \"<div class='next_rsvd_pnum'>\"+rsvd.pnum+\"명</div>\";\n");
      out.write("        \t\tlet parStr = rsvd.time.split(\" \")[1].split(\":\");\n");
      out.write("\t            let time = parStr[0] + \":\" + parStr[1];\n");
      out.write("        \t\tstrNextRsvd += \"<div class='next_rsvd_tm'>\"+time+\"</div>\";\n");
      out.write("        \t\tstrNextRsvd += \"</div>\";\n");
      out.write("                \n");
      out.write("                nextRsvdDiv.html(strNextRsvd);\n");
      out.write("        \t});\n");
      out.write("        \t\n");
      out.write("        }\n");
      out.write("        \n");
      out.write("        function showBoard(storeId) {\n");
      out.write("\n");
      out.write("        \tshowStoreInfo(storeId);\n");
      out.write("            \n");
      out.write("        \tshowWaitList(storeId);\n");
      out.write("    \n");
      out.write("        \tshowRsvdList(storeId);\n");
      out.write("            \n");
      out.write("            showRsvdMap(storeId);\n");
      out.write("  \n");
      out.write("        };\n");
      out.write("        \n");
      out.write("        // 예약 현황판을 보여준다.\n");
      out.write("        function showRsvdBoard(storeId) {\n");
      out.write("        \t\n");
      out.write("        \tlet dateArr = new Array();\n");
      out.write("        \t\n");
      out.write("        \tlet today = new Date();\n");
      out.write("        \tlet year, month, date;\n");
      out.write("        \t\n");
      out.write("        \tfor(let i = 0; i < 7; i++) {\n");
      out.write("        \t\tyear =  today.getFullYear();\n");
      out.write("        \t\tmonth = (today.getMonth() + 1);\n");
      out.write("        \t\tdate = today.getDate();\n");
      out.write("        \t\tif(date < 10) date = \"0\" + date.toString();\n");
      out.write("        \t\tdateArr[i] =    year + '/' + month + '/' + date;\n");
      out.write("        \t\ttoday.setDate(today.getDate() - 1);\n");
      out.write("        \t}\n");
      out.write("        \t\n");
      out.write("    \t\tlet pnumArr = [0,0,0,0,0,0,0];\n");
      out.write("    \t\tlet amountArr = [0,0,0,0,0,0,0];\n");
      out.write("    \t\tlet waitPnumArr = [0,0,0,0,0,0,0];\n");
      out.write("        \t\n");
      out.write("            // 매장의 '예약 현황판' 내용을 가져온다.\n");
      out.write("    \t\tlet getRsvdRsltPr = function (param) {\n");
      out.write("                \n");
      out.write("                let storeId = param.storeId;\n");
      out.write("\n");
      out.write("                return new Promise(function(resolve,reject){\n");
      out.write("                    $.getJSON(\"/dealight/business/manage/board/reservation/rslt/\"+storeId+\".json\",\n");
      out.write("                        function (data) {\n");
      out.write("                                if(data){\n");
      out.write("                                    resolve(data);\n");
      out.write("                                }\n");
      out.write("                                reject(new Error(\"Request is Failed\"));\n");
      out.write("                        });\n");
      out.write("                });\n");
      out.write("                \n");
      out.write("            };\n");
      out.write("\n");
      out.write("            // 매장의 '지난 7일 웨이팅 현황' 내용을 가져온다.\n");
      out.write("    \t\tlet getLastWeekWaitPr = function(param) {\n");
      out.write("                \n");
      out.write("                let storeId = param.storeId;\n");
      out.write("                \n");
      out.write("                return new Promise(function(resolve,reject){\n");
      out.write("                    $.getJSON(\"/dealight/business/manage/board/waiting/rslt/\"+storeId+\"/list.json\",\n");
      out.write("                        function (data) {\n");
      out.write("                                    if(data){\n");
      out.write("                                        resolve(data);\n");
      out.write("                                    }\n");
      out.write("                                    reject(new Error(\"Request is Failed\"));\n");
      out.write("                                }\n");
      out.write("                            );\n");
      out.write("                    });\n");
      out.write("            };\n");
      out.write("\n");
      out.write("            // '해당 매장'의 지난주 예약 정보를 가져온다.\n");
      out.write("            let getLastWeekRsvdPr = function (param) {\n");
      out.write("            \t\n");
      out.write("    \t\t\tlet storeId = param.storeId;\n");
      out.write("                \n");
      out.write("                return new Promise(function(resolve,reject){\n");
      out.write("                    $.getJSON(\"/dealight/business/manage/board/reservation/rslt/\"+ storeId +\"/list.json\",\n");
      out.write("                        function (data) {\n");
      out.write("                                if(data){\n");
      out.write("                                    resolve(data);\n");
      out.write("                                }\n");
      out.write("                                reject(new Error(\"Request is Failed\"));\n");
      out.write("                            }\n");
      out.write("                        );\n");
      out.write("                    });\n");
      out.write("            };\n");
      out.write("\n");
      out.write("            let createChartPr = function(){\n");
      out.write("            \t\n");
      out.write("            \tconsole.log(\"promise 4th.....................................\");\n");
      out.write("                        \n");
      out.write("                console.log('dateArr : '+dateArr);\n");
      out.write("    \t\t    console.log('pnumArr : '+pnumArr);\n");
      out.write("    \t\t    console.log('amountArr : '+amountArr);\n");
      out.write("    \t\t    console.log('waitPnumArr : '+waitPnumArr);\n");
      out.write("    \t\t    let chart = document.getElementById('rsvd_chart');\n");
      out.write("    \t\t    let context = chart.getContext('2d'),\n");
      out.write("    \t\t    rsvdChart = new Chart(context, {\n");
      out.write("    \t\t         \ttype : 'line',\n");
      out.write("    \t\t          \tdata : {\n");
      out.write("    \t\t          \t\tlabels : [dateArr[6], dateArr[5], dateArr[4], dateArr[3], dateArr[2], dateArr[1], dateArr[0]],\n");
      out.write("    \t\t          \t\tdatasets : [{\n");
      out.write("    \t\t           \t\t\tlabel : '예약 인원',\n");
      out.write("    \t\t           \t\t\tlineTension : 0,\n");
      out.write("    \t\t           \t\t\tdata : [pnumArr[6], pnumArr[5], pnumArr[4], pnumArr[3], pnumArr[2], pnumArr[1], pnumArr[0]],\n");
      out.write("    \t\t           \t\t\tbackgroundColor : \"rgba(153,255,51,0.4)\"\n");
      out.write("    \t\t           \t\t},  {\n");
      out.write("    \t\t           \t\t\tlabel : \"웨이팅 인원\",\n");
      out.write("    \t\t           \t\t\tdata : [waitPnumArr[6],waitPnumArr[5],waitPnumArr[4],waitPnumArr[3],waitPnumArr[2],waitPnumArr[1],waitPnumArr[0]],\n");
      out.write("    \t\t          \t\t\tbackgroundColor: \"rgba(238, 48, 105, 0.835)\"\n");
      out.write("    \t\t           \t\t}\n");
      out.write("    \t\t           \t\t/*,{\n");
      out.write("    \t\t           \t\t\tlabel : \"예약 금액\",\n");
      out.write("    \t\t          \t\t\tdata : [amountArr[6],amountArr[5],amountArr[4],amountArr[3],amountArr[2],amountArr[1],amountArr[0]],\n");
      out.write("    \t\t          \t\t\tbackgroundColor: \"rgba(255,153,0,0.4)\"\n");
      out.write("    \t\t           \t\t}*/]\n");
      out.write("    \t\t           \t}\n");
      out.write("    \t\t       \t}); // end chart js\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            let p1 = getRsvdRsltPr;\n");
      out.write("            let p2 = getLastWeekWaitPr;\n");
      out.write("            let p3 = getLastWeekRsvdPr;\n");
      out.write("            let p4 = createChartPr;\n");
      out.write("\n");
      out.write("            let p5 = Promise.all([p1,p2,p3,p4]);\n");
      out.write("\n");
      out.write("            p5.then(function (value) {\n");
      out.write("            \t\n");
      out.write("            \tconsole.log(\"promise start.....................................\");\n");
      out.write("            \tconsole.log(\"p5 : \" + p5);\n");
      out.write("\n");
      out.write("\n");
      out.write("                value[0]({storeId:storeId}).then(dto => {\n");
      out.write("                \t\n");
      out.write("                \tconsole.log(\"promise 1st.....................................\");\n");
      out.write("                \tconsole.log('dto : '+dto);\n");
      out.write("\n");
      out.write("                    let strRsvdRslt = \"\";\n");
      out.write("            \t\tif(!dto)\n");
      out.write("            \t\t\treturn;\n");
      out.write("            \t\tstrRsvdRslt += \"<div class='today_rsvd_rslt_tit'>당일 예약 결과</div>\";\n");
      out.write("            \t\tstrRsvdRslt += \"<div class='rsvd_rslt_wrapper'>\";\n");
      out.write("            \t\tstrRsvdRslt += \"<div>오늘 총 예약 수 : \" + dto.totalTodayRsvd  +\"</div>\";\n");
      out.write("            \t\tstrRsvdRslt += \"<div>오늘 총 예약 인원 : \" + dto.totalTodayRsvdPnum  +\"</div>\";\n");
      out.write("            \t\tstrRsvdRslt += \"<div>[오늘의 인기 메뉴]</div>\";\n");
      out.write("            \t\tObject.entries(dto.todayFavMenuMap).forEach(([key,value]) => {\n");
      out.write("    \t        \t\tstrRsvdRslt += \"<div>\" + key +' : '+ value  +\"</div>\";\n");
      out.write("                    })\n");
      out.write("                    strRsvdRslt += \"</div>\";\n");
      out.write("\n");
      out.write("                    console.log('strRsvdRslt : '+strRsvdRslt);\n");
      out.write("                    rsvdRsltDiv.html(strRsvdRslt);\n");
      out.write("                        \n");
      out.write("                    return value[1]({storeId:storeId});\n");
      out.write("                }).then(waitList => {\n");
      out.write("                \tconsole.log(\"promise 2nd.....................................\");\n");
      out.write("                \tconsole.log(\"wait list : \"+waitList);\n");
      out.write("    \t        \t\t\n");
      out.write("    \t        \t\twaitList.forEach( wait => {\n");
      out.write("    \t        \t\t\tconsole.log('wait reg tm : '+wait.strWaitRegTm);\n");
      out.write("    \t        \t\t\tconsole.log('wait pnum : '+wait.waitPnum);\n");
      out.write("    \t        \t\t\twaitPnumArr[dateArr.indexOf(wait.strWaitRegTm)] += wait.waitPnum;\n");
      out.write("    \t        \t\t\t\n");
      out.write("                        });\n");
      out.write("                    \n");
      out.write("                    return value[2]({storeId:storeId});\n");
      out.write("                    \n");
      out.write("                }).then(rsvdList => {\n");
      out.write("                \t\n");
      out.write("                \tconsole.log(\"promise 3rd.....................................\");\n");
      out.write("                \t\n");
      out.write("                    let strLastWeekRsvd = \"\";\n");
      out.write("            \t\tif(!rsvdList)\n");
      out.write("            \t\t\treturn;\n");
      out.write("            \t\t\n");
      out.write("            \t\tconsole.log(rsvdList[0].pnum);\n");
      out.write("            \t\tconsole.log('wait id : '+rsvdList[0].waitId);\n");
      out.write("            \t\tconsole.dir(rsvdList[0]);\n");
      out.write("    \t\t\t\t\n");
      out.write("            \t\trsvdList.forEach(rsvd => {\n");
      out.write("            \t\t\tconsole.log('rsvd str reg date : ' + rsvd.strRegDate);\n");
      out.write("            \t\t\tpnumArr[dateArr.indexOf(rsvd.strRegDate)] += rsvd.pnum;\n");
      out.write("            \t\t\tamountArr[dateArr.indexOf(rsvd.strRegDate)] += rsvd.totAmt;\n");
      out.write("            \t\t\t\n");
      out.write("            \t\t\t//pnumArr[dateArr.indexOf(rsvd.strInDate)].push(rsvd)\n");
      out.write("            \t\t\t\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"<li hidden class='btnStoreId'>\"+rsvd.storeId+\"</li>\";\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"<li hidden class='btnUserId'>\"+rsvd.userId+\"</li>\";\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"<li>매장번호 : \"+ rsvd.storeId + \"</li>\";\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"<li>회원 아이디 : \"+ rsvd.userId + \"</li>\";\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"<li>핫딜 번호 :\"+ rsvd.htdlId + \"</li>\";\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"<li>승인 번호 : \"+ rsvd.aprvNo + \"</li>\";\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"<li>예약 인원 : \"+ rsvd.pnum + \"</li>\";\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"<li>예약 시간 : \"+ rsvd.time + \"</li>\";\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"<li>예약 상태 : \"+ rsvd.stusCd + \"</li>\";\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"<li>예약 총 금액 : \"+ rsvd.totAmt + \"</li>\";\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"<li>예약 총 수량 : \"+ rsvd.totQty + \"</li>\";\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"<li>예약 등록 날짜 : \"+ rsvd.strRegDate + \"</li>\";\n");
      out.write("            \t\t\tstrLastWeekRsvd += \"===========================================\";\n");
      out.write("                    });\n");
      out.write("            \t\t\n");
      out.write("            \t\tconsole.log('str Last Week Rsvd : ' + rsvdList);\n");
      out.write("                    \n");
      out.write("    \t        \tlastWeekRsvdUL.html(strLastWeekRsvd);\n");
      out.write("\n");
      out.write("                    return value[3]();\n");
      out.write("                }).then();\n");
      out.write("               \n");
      out.write("            });\n");
      out.write("        };\n");
      out.write("        \n");
      out.write("        /*\n");
      out.write("        \t유저의 예약 히스토리를 보여준다.\n");
      out.write("        \n");
      out.write("        */\n");
      out.write("        function showUserRsvdList(storeId,userId,callback){\n");
      out.write("        \t\n");
      out.write("        \tboardService.getUserRsvdList({storeId:storeId,userId:userId}, function(userRsvdList){\n");
      out.write("        \t\t\n");
      out.write("        \t\tlet strUserRsvdList = \"\";\n");
      out.write("        \t\tif(!userRsvdList)\n");
      out.write("        \t\t\treturn;\n");
      out.write("        \t\t\n");
      out.write("        \t\tstrUserRsvdList += \"<div class='modal_top rsvdDtls' id='modal_rsvd_dtls'>\";\n");
      out.write("        \t\t\n");
      out.write("        \t\tstrUserRsvdList += \"<div class='rsvd_top_wrapper'>\";\n");
      out.write("        \t\tstrUserRsvdList += \"</div>\";\n");
      out.write("        \t\tstrUserRsvdList += \"<div class='rsvd_mid_wrapper'>\";\n");
      out.write("        \t\tstrUserRsvdList += \"</div>\";\n");
      out.write("\n");
      out.write("        \t\tstrUserRsvdList += \"<div class='rsvd_bot_wrapper'>\";\n");
      out.write("        \t\tstrUserRsvdList += \"<div class='rsvd_history_tit'>\";\n");
      out.write("        \t\tstrUserRsvdList += \"매장 방문 히스토리\";\n");
      out.write("        \t\tstrUserRsvdList += \"</div>\";\n");
      out.write("        \t\tuserRsvdList.forEach(rsvd => {\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div class='rsvd_history'>\";\n");
      out.write("    \t    \t\tif(rsvd.htdlId) strUserRsvdList += \"<span class='htdl_stus'><i class='fas fa-burn'></i></span>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div class='info'>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div>예약 번호</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div>\"+rsvd.rsvdId+\"</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div class='info'>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div>예약 인원</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div>\"+ rsvd.pnum + \"</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div class='info'>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div>예약 시간</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div>\"+ rsvd.time + \"</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div class='info'>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div>예약 총 금액</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div>\"+ rsvd.totAmt + \"</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div class='info'>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div>예약 총 수량</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"<div>\"+ rsvd.totQty + \"</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"</div>\";\n");
      out.write("    \t    \t\tstrUserRsvdList += \"</div>\";\n");
      out.write("        \t\t});\n");
      out.write("        \t\tstrUserRsvdList += \"</div>\";\n");
      out.write("        \t\t\n");
      out.write("\n");
      out.write("\n");
      out.write("        \t\trsvdDtlsDiv.css(\"display\",\"flex\");\n");
      out.write("        \t\trsvdDtlsDiv.html(strUserRsvdList);\n");
      out.write("        \t\tconsole.log(\"=======================\");\n");
      out.write("        \t\tconsole.log(\"user history complete\");\n");
      out.write("        \t\tshowRsvdDtls(userRsvdList[0].rsvdId);\n");
      out.write("        \t\t\n");
      out.write("        \t})\n");
      out.write("        };\n");
      out.write("        \n");
      out.write("        /*\n");
      out.write("        \t예약 상세를 보여준다.\n");
      out.write("        \n");
      out.write("        */\n");
      out.write("        function showRsvdDtls(rsvdId){\n");
      out.write("        \t\n");
      out.write("        \tboardService.getRsvdDtls({rsvdId:rsvdId}, function(rsvd){\n");
      out.write("        \t\t\n");
      out.write("        \t\tconsole.log(\"rsvd id : \"+rsvdId)\n");
      out.write("        \t\t\n");
      out.write("    \t\t\tlet strRsvdDtlsTop = \"\";\n");
      out.write("    \t\t\t\n");
      out.write("    \t\t\tif(!rsvd)\n");
      out.write("    \t\t\t\treturn;\n");
      out.write("    \t\t\t\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div class='modal_rsvd_tit'>예약 상세</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div class='rsvd_top_box'>\";\n");
      out.write("    \t\t\tif(rsvd.htdlId != null) strRsvdDtlsTop += \"<span class='htdl_stus'><i class='fas fa-burn'></i></i></span>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<span class='htdl_stus'></span>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div class='modal_rsvd_info'>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div>예약 번호</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div>\"+rsvd.rsvdId+\"</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div class='modal_rsvd_info'>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div>예약 시간</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div>\"+rsvd.time+\"</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div class='modal_rsvd_info'>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div>예약 총 가격</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div>\"+rsvd.totAmt+\"원</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div class='modal_rsvd_info'>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div>예약 총 수량</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"<div>\"+rsvd.totQty+\"개</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsTop += \"</div>\";\n");
      out.write("    \t\t\t\n");
      out.write("    \t\t\t$(\".rsvd_top_wrapper\").html(strRsvdDtlsTop);\n");
      out.write("    \t\t\t\n");
      out.write("    \t\t\tlet strRsvdDtlsMid = \"\";\n");
      out.write("    \t\t\t\n");
      out.write("    \t\t\tstrRsvdDtlsMid += \"<div class='modal_menu_head'>\";\n");
      out.write("    \t\t\tstrRsvdDtlsMid += \"<div>메뉴</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsMid += \"<div>가격</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsMid += \"<div>수량</div>\";\n");
      out.write("    \t\t\tstrRsvdDtlsMid += \"</div>\";\n");
      out.write("    \t\t\trsvd.rsvdDtlsList.forEach(dtls => {\n");
      out.write("    \t\t\t\tstrRsvdDtlsMid += \"<div class='modal_menu_info'>\";\n");
      out.write("    \t\t\t\tstrRsvdDtlsMid += \"<div>\" + dtls.menuNm +\"</div>\";\n");
      out.write("    \t\t\t\tstrRsvdDtlsMid += \"<div>\" + dtls.menuPrc +\"원</div>\";\n");
      out.write("    \t\t\t\tstrRsvdDtlsMid += \"<div>\" + dtls.menuTotQty +\"</div>\";\n");
      out.write("    \t\t\t\tstrRsvdDtlsMid += \"</div>\";\n");
      out.write("    \t\t\t});\n");
      out.write("    \t\t\t\n");
      out.write("    \t\t\t$(\".rsvd_mid_wrapper\").html(strRsvdDtlsMid);\n");
      out.write("        \t\t\n");
      out.write("        \t\tconsole.log(\"=======================\")\n");
      out.write("        \t\tconsole.log(\"rsvd dtls complete\")\n");
      out.write("        \t\t\n");
      out.write("        \t})\n");
      out.write("        };\n");
      out.write("        /*\n");
      out.write("        \n");
      out.write("        \t오프라인 웨이팅 등록 폼을 보여준다.\n");
      out.write("        \n");
      out.write("        */\n");
      out.write("        \n");
      out.write("        function showWaitRegisterForm(storeId){\n");
      out.write("        \t\n");
      out.write("        \tlet date = new Date();\n");
      out.write("        \tlet strWaitRegForm = \"\";\n");
      out.write("        \t\n");
      out.write("        \tparDate = date.toLocaleDateString().split(\".\");\n");
      out.write("        \tlet regTime = parDate[0] + \"/\" + parDate[1].trim() + \"/\" + parDate[2].trim() +\" \"+\n");
      out.write("        \tdate.getHours() + \":\" + date.getMinutes() + \":\" + date.getSeconds();\n");
      out.write("        \t\n");
      out.write("        \tstrWaitRegForm += \"<div class='modal_tit'>\";\n");
      out.write("        \tstrWaitRegForm += \"<span>웨이팅 현장 등록</span>\";\n");
      out.write("        \tstrWaitRegForm += \"</div>\";\n");
      out.write("        \tstrWaitRegForm += \"<div class='modal_top'>\";\n");
      out.write("        \tstrWaitRegForm += \"<div class='form_left_wrapper'>\";\n");
      out.write("        \tstrWaitRegForm += \"<form action='/dealight/business/manage/waiting/register' id='waitRegForm' method='post'>\";\n");
      out.write("        \tstrWaitRegForm += \"<div>\";\n");
      out.write("        \tstrWaitRegForm += \"<input type='text' class='' id='js_wait_custNm' name='custNm' placeholder='고객 이름'>\";\n");
      out.write("        \tstrWaitRegForm += \"<span id='name_msg'></span>\";\n");
      out.write("        \tstrWaitRegForm += \"</div>\";\n");
      out.write("        \tstrWaitRegForm += \"<div>\";\n");
      out.write("        \tstrWaitRegForm += \"<input type='text' class='' id='js_wait_custTelno' placeholder='고객 전화번호' name='custTelno' id='js_wait_custTelno'>\";\n");
      out.write("        \tstrWaitRegForm += \"<span id='phoneNum_msg'></span>\";\n");
      out.write("        \tstrWaitRegForm += \"</div>\";\n");
      out.write("        \tstrWaitRegForm += \"<div>\";\n");
      out.write("        \tstrWaitRegForm += \"<input type='text' class=''id='js_wait_pnum' placeholder='웨이팅 인원' name='waitPnum' id='js_wait_pnum'>\";\n");
      out.write("        \tstrWaitRegForm += \"<span id='pnum_msg'></span>\";\n");
      out.write("        \tstrWaitRegForm += \"</div>\";\n");
      out.write("        \tstrWaitRegForm += \"<input type='text' name='waitRegTm' value='\"+regTime+\"' hidden>\";\n");
      out.write("        \tstrWaitRegForm += \"<input type='text' name='storeId' value='\"+storeId+\"' hidden>\";\n");
      out.write("        \tstrWaitRegForm += \"</form>\";\n");
      out.write("        \tstrWaitRegForm += \"</div>\";\n");
      out.write("        \tstrWaitRegForm += \"<div class='form_right_wrapper'>\";\n");
      out.write("        \tstrWaitRegForm += \"<button id='submit_waitRegForm' type='submit'>현장 등록</button>\";\n");
      out.write("        \tstrWaitRegForm += \"</div>\";\n");
      out.write("        \tstrWaitRegForm += \"</div>\";\n");
      out.write("        \tstrWaitRegForm += \"<div class='modal_bot'>\";\n");
      out.write("        \tstrWaitRegForm += \"<div>등록 시간</div>\";\n");
      out.write("        \tstrWaitRegForm += \"<div>\"+regTime+\"</div>\";\n");
      out.write("        \tstrWaitRegForm += \"</div>\";\n");
      out.write("        \tstrWaitRegForm += \"\";\n");
      out.write("        \t\n");
      out.write("        \twaitRegFormDiv.css(\"display\",\"flex\")\n");
      out.write("        \twaitRegFormDiv.html(strWaitRegForm);\n");
      out.write("        \t\n");
      out.write("        \t/* wait register valid check*/\n");
      out.write("        \tconst wait_custNm = document.querySelector(\"#js_wait_custNm\"),\n");
      out.write("\t        \twait_phoneNum = document.querySelector(\"#js_wait_custTelno\"),\n");
      out.write("\t        \twait_pnum = document.querySelector(\"#js_wait_pnum\"),\n");
      out.write("\t        \tbtn_submit = document.querySelector(\"#submit_waitRegForm\"),\n");
      out.write("\t        \tname_msg = document.querySelector(\"#name_msg\"),\n");
      out.write("\t        \tphoneNum_msg = document.querySelector(\"#phoneNum_msg\"),\n");
      out.write("\t        \tpnum_msg = document.querySelector(\"#pnum_msg\"),\n");
      out.write("\t        \twaitRegForm = document.querySelector('#waitRegForm');\n");
      out.write("        \t\n");
      out.write("        \tconst inputList = [wait_custNm,wait_phoneNum,wait_pnum];\n");
      out.write("\n");
      out.write("        \t// 웨이팅 등록의 valid check를 진행한다.\n");
      out.write("        \tnameLenCheck = function () {\n");
      out.write("        \t\tif(1 <= wait_custNm.value.length && wait_custNm.value.length <= 5)\n");
      out.write("        \t\t\treturn true;\n");
      out.write("        \t\treturn false;\n");
      out.write("        \t}\n");
      out.write("\n");
      out.write("        \tphoneNumLenCheck = function () {\n");
      out.write("        \t\tif(1 <= wait_phoneNum.value.length && wait_phoneNum.value.length <= 13)\n");
      out.write("        \t\t\treturn true;\n");
      out.write("        \t\treturn false;\n");
      out.write("        \t}\n");
      out.write("\n");
      out.write("        \tpnumSizeCheck = function () {\n");
      out.write("        \t\tif(isNaN(wait_pnum.value))\n");
      out.write("        \t\t\treturn false;\n");
      out.write("        \t\tif(1 <= parseInt(wait_pnum.value) && parseInt(wait_pnum.value) <= 10)\n");
      out.write("        \t\t\treturn true;\n");
      out.write("        \t\treturn false;\n");
      out.write("        \t}\n");
      out.write("\n");
      out.write("        \twait_custNm.addEventListener(\"focusout\", () => {\n");
      out.write("        \t\tif(1 <= wait_custNm.value.length){\n");
      out.write("        \t\t    if(nameLenCheck()){\n");
      out.write("        \t\t        name_msg.innerText = \"이름 형식이 적당하네요.\";\n");
      out.write("        \t\t    }\n");
      out.write("        \t\t    else {\n");
      out.write("        \t\t    \tname_msg.innerText = \"이름 길이를 다시 확인해 주세요. (5자 이내)\";\n");
      out.write("        \t\t    \tname_msg.style.color = \"red\";\n");
      out.write("        \t\t    }\n");
      out.write("        \t\t}\n");
      out.write("        \t})\n");
      out.write("\n");
      out.write("        \twait_phoneNum.addEventListener(\"focusout\", () => {\n");
      out.write("        \t\tif(1 <= wait_phoneNum.value.length){\n");
      out.write("        \t\t    if(phoneNumLenCheck()){\n");
      out.write("        \t\t        phoneNum_msg.innerText = \"전화번호 형식이 적당하네요!\";\n");
      out.write("        \t\t    }\n");
      out.write("        \t\t    else {\n");
      out.write("        \t\t    \tphoneNum_msg.innerText = \" 전화번호 길이를 다시 확인해 주세요. (13자 이내)\";\n");
      out.write("        \t\t    \tphoneNum_msg.style.color = \"red\";\n");
      out.write("        \t\t    }\n");
      out.write("        \t\t}\n");
      out.write("        \t})\n");
      out.write("\n");
      out.write("        \twait_pnum.addEventListener(\"focusout\", () => {\n");
      out.write("        \t\tif(1 <= wait_pnum.value.length){\n");
      out.write("        \t\t    if(pnumSizeCheck()){\n");
      out.write("        \t\t        pnum_msg.innerText = \"인원이 적당합니다.\";\n");
      out.write("        \t\t    }\n");
      out.write("        \t\t    else {\n");
      out.write("        \t\t    \tpnum_msg.innerText = \"인원이 너무 많거나 형식이 적당하지 않아요! (10명 이내)\";\n");
      out.write("        \t\t    \tpnum_msg.style.color = \"red\";\n");
      out.write("        \t\t    }\n");
      out.write("        \t\t}\n");
      out.write("        \t})\n");
      out.write("\n");
      out.write("        \t// null이면  true\n");
      out.write("        \tnullCheck = function(inputList) {\n");
      out.write("        \t    for(let i = 0; i < inputList.length; i++)\n");
      out.write("        \t        if(inputList[i].value == \"\")\n");
      out.write("        \t            return true;\n");
      out.write("        \t    \n");
      out.write("        \t    return false;\n");
      out.write("        \t}\n");
      out.write("        \t\n");
      out.write("        \tlet modalInputCustNm = modal.find(\"input[name='custNm']\"),\n");
      out.write("\t\t\t\tmodalInputCutsTelNo = modal.find(\"input[name='custTelno']\"),\n");
      out.write("\t\t\t\tmodalInputWaitPnum = modal.find(\"input[name='waitPnum']\"),\n");
      out.write("\t\t\t\tmodalInputWaitRegTm = modal.find(\"input[name='waitRegTm']\"),\n");
      out.write("\t\t\t\tmodalInputStoreId = modal.find(\"input[name='storeId']\");\n");
      out.write("    \t\n");
      out.write("        \tbtn_submit.addEventListener(\"click\", (e) => {\n");
      out.write("    \t\t\n");
      out.write("\t    \t\te.preventDefault();\n");
      out.write("\t    \t\t\n");
      out.write("\t    \t\tlet wait = {\n");
      out.write("\t    \t\t\t\tcustNm : modalInputCustNm.val(),\n");
      out.write("\t    \t\t\t\tcustTelno : modalInputCutsTelNo.val(),\n");
      out.write("\t    \t\t\t\twaitRegTm : modalInputWaitRegTm.val(),\n");
      out.write("\t    \t\t\t\twaitPnum : modalInputWaitPnum.val(),\n");
      out.write("\t    \t\t\t\tstoreId : modalInputStoreId.val()\n");
      out.write("\t    \t\t};\n");
      out.write("\t    \t\t\n");
      out.write("\t    \t\t\n");
      out.write("\t    \t    if(nullCheck(inputList)){\n");
      out.write("\t    \t        alert(\"필드가 비었어요\")\n");
      out.write("\t    \t        return;\n");
      out.write("\t    \t    }\n");
      out.write("\t    \t    \n");
      out.write("\t    \t    if(!nameLenCheck()){\n");
      out.write("\t    \t    \talert(\"🙅이름을 형식에 맞게 입력해주세요\");\n");
      out.write("\t    \t        return;\n");
      out.write("\t    \t    }\n");
      out.write("\t    \t    \n");
      out.write("\t    \t    if(!phoneNumLenCheck()){\n");
      out.write("\t    \t        alert(\"🙅전화번호를 형식에 맞게 입력해주세요\");\n");
      out.write("\t    \t        return;\n");
      out.write("\t    \t    }\n");
      out.write("\t    \t    \n");
      out.write("\t    \t    if(!pnumSizeCheck()){\n");
      out.write("\t    \t        alert(\"🙅예약인원을 형식에 맞게 입력해주세요\");\n");
      out.write("\t    \t        return;\n");
      out.write("\t    \t    }\n");
      out.write("\t    \t    \n");
      out.write("\t\n");
      out.write("\t    \t\tboardService.regWait(wait, result => {\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t\t//alert(result);\n");
      out.write("\t        \t\tshowWaitList(storeId);\n");
      out.write("\t        \t\tmodal.find(\"ul\").html(\"\");\n");
      out.write("\t    \t\t\tmodal.find(\"input\").val(\"\");\n");
      out.write("\t    \t\t\tmodal.css(\"display\",\"none\");\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t});\n");
      out.write("    \t\t\n");
      out.write("    \t\t});\n");
      out.write("        };\n");
      out.write("        \n");
      out.write("        // 메뉴리스트\n");
      out.write("        \n");
      out.write("        let showRegHtdl = function(storeId){\n");
      out.write("        \t\n");
      out.write("        \tlet strHtdl = \"\";\n");
      out.write("        \t\n");
      out.write("        \tconsole.log('show reg htdl store id : '+storeId);\n");
      out.write("        \t\n");
      out.write("        \tboardService.getMenuList({storeId:storeId}, function(menuList){\n");
      out.write("        \t\n");
      out.write("        \t\tconsole.log('show reg htdl store id : '+storeId);\n");
      out.write("        \t\t\n");
      out.write("\t        \tstrHtdl += \"<div class='modal_tit'>\";\n");
      out.write("\t        \tstrHtdl += \"<span>핫딜 등록하기</span>\";\n");
      out.write("\t        \tstrHtdl += \"</div>\";\n");
      out.write("\t        \tstrHtdl += \"<div class='modal_top htld_reg'>\";\n");
      out.write("\t        \tstrHtdl += \"<div class='htdl_reg_form_wrapper'>\";\n");
      out.write("\t        \tstrHtdl += \"<form class='regHtdlForm' action='/dealight/business/manage/board/htdl/new' method='post'>\";\n");
      out.write("\t        \tstrHtdl += \"<div class='htdl_label_input htdl_name'>\";\n");
      out.write("\t        \tstrHtdl += \"<span>핫딜 제목</span>\";\n");
      out.write("\t        \tstrHtdl += \"<input class='form-control' name='name' placeholder='핫딜 제목'>\";\n");
      out.write("\t        \tstrHtdl += \"</div>\";\n");
      out.write("\t        \tstrHtdl += \"<div class='htdl_label_input htdl_name'>\";\n");
      out.write("\t        \tstrHtdl += \"<span>세트 이름</span>\";\n");
      out.write("\t        \tstrHtdl += \"<input class='form-control' name='setName' placeholder='세트 이름' required>\";\n");
      out.write("\t        \tstrHtdl += \"</div>\";\n");
      out.write("\t        \tstrHtdl += \"<div class='htdl_label_input htdl_menu'>\";\n");
      out.write("\t        \tstrHtdl += \"<span>핫딜 메뉴</span>\";\n");
      out.write("\t        \tstrHtdl += \"<div class='htdl_menu_itmes'>\";\n");
      out.write("\t        \tif(menuList)\n");
      out.write("\t        \tmenuList.forEach((menu,i) => {\n");
      out.write("\t\t        \tstrHtdl += \"<input type='checkbox' id='menu\"+i+\"' class='js-menu' value='\"+menu.price+\"'>\";\n");
      out.write("\t\t        \tstrHtdl += \"<label for='menu\"+i+\"'>\" +menu.name+\"</label>\";\n");
      out.write("\t        \t});\n");
      out.write("\t        \tstrHtdl += \"</div>\";\n");
      out.write("\t        \tstrHtdl += \"</div>\";\n");
      out.write("\t        \tstrHtdl += \"<div class='htdl_label_input htdl_dc'>\";\n");
      out.write("\t        \tstrHtdl += \"<span>할인율</span>\";\n");
      out.write("\t        \tstrHtdl += \"<select id='dcRate' name='dcRate'>\";\n");
      out.write("\t        \tstrHtdl += \"<option value=''>--</option>\";\n");
      out.write("\t        \tstrHtdl += \"<option value='10'>10%</option>\";\n");
      out.write("\t        \tstrHtdl += \"<option value='20'>20%</option>\";\n");
      out.write("\t        \tstrHtdl += \"<option value='30'>30%</option>\";\n");
      out.write("\t        \tstrHtdl += \"<option value='40'>40%</option>\";\n");
      out.write("\t        \tstrHtdl += \"<option value='50'>50%</option>\";\n");
      out.write("\t        \tstrHtdl += \"</select>\";\n");
      out.write("\t        \tstrHtdl += \"</div>\";\n");
      out.write("\t        \tstrHtdl += \"<div class='htdl_label_input htdl_bef_price'>\";\n");
      out.write("\t        \tstrHtdl += \"<span>할인 적용전 가격</span>\";\n");
      out.write("\t        \tstrHtdl += \"<input class='js-befPrice' value='0' name='befPrice' readonly='readonly'>\";\n");
      out.write("\t        \tstrHtdl += \"</div>\";\n");
      out.write("\t        \t\n");
      out.write("\t        \tstrHtdl  += \"<div class='htdl_label_input htdl_aft_price'>\";\n");
      out.write("\t        \tstrHtdl  += \"<span>할인 적용후 가격</span>\";\n");
      out.write("\t        \tstrHtdl  += \"<input class='js-aftPrice' readonly='readonly'>\";\n");
      out.write("\t        \tstrHtdl  += \"</div>\";\n");
      out.write("\t        \tstrHtdl  += \"<div class='htdl_label_input htdl_start_tm'>\";\n");
      out.write("\t        \tstrHtdl  += \"<span>핫딜 시작 시간</span>\";\n");
      out.write("\t        \tstrHtdl  += \"<input type='time' name='startTm' readonly>\";\n");
      out.write("\t        \tstrHtdl  += \"</div>\";\n");
      out.write("\t        \tstrHtdl  += \"<div class='htdl_label_input htld_end_tm'>\";\n");
      out.write("\t        \tstrHtdl  += \"<span>핫딜 마감 시간</span>\";\n");
      out.write("\t        \tstrHtdl  += \"<input type='time' name='endTm' readonly>\";\n");
      out.write("\t        \tstrHtdl  += \"</div>\";\n");
      out.write("\t        \tstrHtdl  += \"<div class='htdl_label_input htdl_lmt_pnum'>\";\n");
      out.write("\t        \tstrHtdl  += \"<span>핫딜 제한 인원:</span>\";\n");
      out.write("\t        \tstrHtdl  += \"<input class='form-control' type='number' min='0' max='50' name='lmtPnum' readonly='readonly'>\";\n");
      out.write("\t        \tstrHtdl  += \"</div>\";\n");
      out.write("\t        \tstrHtdl  += \"<div class='htdl_label_input htdl_intro'>\";\n");
      out.write("\t        \tstrHtdl  += \"<span>핫딜 소개</span>\";\n");
      out.write("\t        \tstrHtdl  += \"<textarea rows='2' cols='22' name='intro'></textarea>\";\n");
      out.write("\t        \tstrHtdl  += \"</div>\";\n");
      out.write("\t        \t\n");
      out.write("\t        \tstrHtdl += \"<div class='uploadDiv htdl'>\";\n");
      out.write("\t        \t\n");
      out.write("\t    \t\tstrHtdl += \"<label for='js_upload'>\";\n");
      out.write("\t    \t\tstrHtdl += \"<i class='fas fa-arrow-circle-up'></i> 사진 첨부하기\";\n");
      out.write("\t    \t\tstrHtdl += \"</label>\";\n");
      out.write("\t    \t\tstrHtdl += \"<input style='display:none;' type='file' id='js_upload' name='uploadFile' multiple hidden='hidden'>\";\n");
      out.write("\t    \t\tstrHtdl += \"</div>\";\n");
      out.write("                strHtdl += \"<div class='uploadResult_htdl'><ul></ul></div>\";\n");
      out.write("                strHtdl += \"<input type='hidden' id='storeId' name='storeId' value='\"+storeId+\"'>\";\n");
      out.write("                strHtdl += \"<input type='hidden' id='brch' name='brch' value='\"+brch+\"'>\";\n");
      out.write("                strHtdl += \"<div class='htdl_reg_btn_box'>\";\n");
      out.write("                strHtdl += \"<button class='regHtdlBtn' type='submit' data-oper='register'>승낙</button>\";\n");
      out.write("                strHtdl += \"<button class='regHtdlBtn reject' type='submit' data-oper='refuse'>거절</button>\";\n");
      out.write("                strHtdl += \"</div>\";\n");
      out.write("\t        \t\n");
      out.write("        \t\tconsole.log(\"before strHtdl : \"+ strHtdl);\n");
      out.write("        \t\tregHtdlFormDiv.css(\"display\",\"flex\")\n");
      out.write("\t        \tregHtdlFormDiv.html(strHtdl);\n");
      out.write("\t        \t\n");
      out.write("\t        \t// 핫딜 제안 등록폼에 데이터를 넣어준다.\n");
      out.write("\t        \t$(\".regHtdlForm input[name=name]\").val($(\".manage_htdl_dto\").data().name);\n");
      out.write("        \t\t$(\".regHtdlForm input[name=lmtPnum]\").val($(\".manage_htdl_dto\").data().lmtpnum);\n");
      out.write("        \t\t$(\".regHtdlForm input[name=startTm]\").val($(\".manage_htdl_dto\").data().starttm);\n");
      out.write("        \t\t$(\".regHtdlForm input[name=endTm]\").val($(\".manage_htdl_dto\").data().endtm);\n");
      out.write("        \t\t\n");
      out.write("\t        \t/* jong woo js*/\n");
      out.write("\t        \t//메뉴 리스트, 할인율, 메뉴 체크박스\n");
      out.write("\t        \tlet menus = document.querySelectorAll(\".js-menu\"),\n");
      out.write("\t\t        \tdcRate = document.querySelector(\"#dcRate\"),\n");
      out.write("\t\t        \tmenuBox = document.querySelectorAll(\".js-menu\");\n");
      out.write("\t        \t\n");
      out.write("\t        \t//할인 적용 전/후 가격\n");
      out.write("\t        \tlet befPrice = document.querySelector(\".js-befPrice\"),\n");
      out.write("\t        \t\tafterPrice = document.querySelector(\".js-aftPrice\"),\n");
      out.write("\t        \t\ttotal = 0,\n");
      out.write("\t        \t\trate = 0;\n");
      out.write("\t        \t\n");
      out.write("\t            // 핫딜 등록폼 \n");
      out.write("\t    \t\t//할인 적용한 가격 계산\n");
      out.write("\t    \t\tlet getAfterPrice = function (total, rate) {\n");
      out.write("\t    \t\t\tlet price = total - (total * rate);\n");
      out.write("\t    \t\t\tconsole.log(price);\n");
      out.write("\t    \t\t\tafterPrice.value = price;\n");
      out.write("\t    \t\t}\n");
      out.write("\t\t\t\t\n");
      out.write("\t    \t\t//메뉴 체크\n");
      out.write("\t    \t\tlet menuCheck = function (price, idx) {\n");
      out.write("\n");
      out.write("\t    \t\t\tif (menus[idx].checked)\n");
      out.write("\t    \t\t\t\ttotal += Number(price);\n");
      out.write("\t    \t\t\telse\n");
      out.write("\t    \t\t\t\ttotal -= Number(price);\n");
      out.write("\t    \t\t\tbefPrice.value = total;\n");
      out.write("\n");
      out.write("\t    \t\t\tgetAfterPrice(total, rate);\n");
      out.write("\t    \t\t};\n");
      out.write("\t        \t\n");
      out.write("\t        \t//메뉴에 따른 가격 선택\n");
      out.write("\t    \t\tfor (let i = 0; i < menus.length; i++) {\n");
      out.write("\t    \t\t\t$(\".js-menu\").eq(i).click(function() {\n");
      out.write("\t    \t\t\t\tconsole.log($(this).val());\n");
      out.write("\t    \t\t\t\tmenuCheck($(this).val(), i);\n");
      out.write("\t    \t\t\t});\n");
      out.write("\t    \t\t};\n");
      out.write("\t    \t\t\n");
      out.write("\t    \t\t//할인율 변화\n");
      out.write("\t    \t\t$(\"#dcRate\").change(function(){\n");
      out.write("\t    \t\t\trate = $(this).val()/100;\n");
      out.write("\t    \t\t\tconsole.log(\"change: \" + rate);\n");
      out.write("\t\n");
      out.write("\t    \t\t\tgetAfterPrice(total, rate);\n");
      out.write("\t    \t\t});\n");
      out.write("\t    \t\t\n");
      out.write("\t    \t\tlet showUploadResult_htdl = function (uploadResultArr) {\n");
      out.write("\t    \t        \n");
      out.write("\t    \t        /**업로드 된게 없으면 그대로 반환 */\n");
      out.write("\t    \t\t\tif(!uploadResultArr || uploadResultArr.length == 0){return; }\n");
      out.write("\t    \t        \n");
      out.write("\t    \t        /*업로드 결과를 보여줄 ul를 선택 */\n");
      out.write("\t    \t\t\tlet uploadUL_htdl = $(\".uploadResult_htdl ul\");\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t\tlet str = \"\";\n");
      out.write("\t    \t        \n");
      out.write("\t    \t        /*업로드 결과를 보여준다. */\n");
      out.write("\t    \t\t\t$(uploadResultArr).each(function(i,obj){\n");
      out.write("\t    \t\t\t\t\n");
      out.write("\t    \t            /* 만일 파일이 이미지 형식이면 */\n");
      out.write("\t    \t            /* data에 path,uuid,filename,type을 각각 저장한다. */\n");
      out.write("\t    \t\t\t\t\n");
      out.write("\t    \t\t\t\tif(i === 0) // 파일 1개만 올릴 수 있게\n");
      out.write("\t    \t\t\t\tif(obj.image) {\n");
      out.write("\t    \t\t\t\t\tlet fileCallPath = encodeURIComponent(obj.uploadPath+\"/s_\"+obj.uuid+\"_\"+obj.fileName);\n");
      out.write("\t    \t\t\t\t\t\n");
      out.write("\t    \t\t\t\t\t// \n");
      out.write("\t    \t\t\t\t\tlet originPath = obj.uploadPath + \"\\\\\" + obj.uuid +\"_\" + obj.fileName;\n");
      out.write("\t    \t\t\t\t\toriginPath = originPath.replace(new RegExp(/\\\\/g),\"/\");\n");
      out.write("\t    \t\t\t\t\t\n");
      out.write("\t    \t\t\t\t\tstr += \"<li data-path='\" + obj.uploadPath +\"'\";\n");
      out.write("\t    \t\t\t\t\tstr += \"data-uuid='\"+obj.uuid+\"' data-filename='\"+obj.fileName+\"'data-type='\"+obj.image+\"'\";\n");
      out.write("\t    \t\t\t\t\tstr += \"><div>\";\n");
      out.write("\t    \t\t\t\t\tstr += \"<button type ='button' data-file=\\'\"+fileCallPath+\"\\' data-type='image'\"\n");
      out.write("\t    \t\t\t\t\t\t\t\t+\" class='btn btn-warning btn-circle fileupload_img_btn'><i class='far fa-times-circle'></i></button><br>\";\n");
      out.write("\t    \t\t\t\t\tstr += \"<img src='/display?fileName=\" + fileCallPath + \"'>\";\n");
      out.write("\t    \t\t\t\t\tstr += \"</div>\";\n");
      out.write("\t    \t\t\t\t\tstr += \"</li>\";\n");
      out.write("\t    \t                /* 만일 파일이 이미지 형식이 아니면 */\n");
      out.write("\t    \t                /* default img를 보여준다. */\n");
      out.write("\t    \t\t\t\t} else {\n");
      out.write("\t    \t\t\t\t\tlet fileCallPath = encodeURIComponent(obj.uploadPath + \"/\" + obj.uuid + \"_\" + obj.fileName);\n");
      out.write("\t    \t\t\t\t\tlet fileLink = fileCallPath.replace(new RegExp(/\\\\/g),\"/\");\n");
      out.write("\n");
      out.write("\t    \t\t\t\t\tstr += \"<li \"\n");
      out.write("\t    \t\t\t\t\tstr += \"data-path='\" + obj.uploadPath + \"'data-uuid='\" + obj.uuid + \"'data-filename='\" + obj.fileName + \"' data-type='\" +obj.image+\"'>\" + \"<div>\";\n");
      out.write("\t    \t\t\t\t\tstr += \"<button type ='button' data-file=\\'\"+fileCallPath+\"\\' data-type='image'\"\n");
      out.write("\t    \t\t\t\t\t+\" class='btn btn-warning btn-circle fileupload_img_btn'><i class='far fa-times-circle'></i></button><br>\";\n");
      out.write("\t    \t\t\t\t\tstr += \"<img src='/resources/img/attach.png'>\";\n");
      out.write("\t    \t\t\t\t\tstr += \"</div>\";\n");
      out.write("\t    \t\t\t\t\tstr += \"</li>\";\n");
      out.write("\t    \t\t\t\t}\n");
      out.write("\t    \t\t\t});\n");
      out.write("\t    \t        \n");
      out.write("\t    \t\t\tuploadUL_htdl.html(str);\n");
      out.write("\t    \t\t}\n");
      out.write("\t    \t    \n");
      out.write("\t    \t    /*파일 valid check */\n");
      out.write("\t    \t\tlet checkExtension = function (fileName, fileSize) {\n");
      out.write("\t    \t        \n");
      out.write("\t    \t        /*파일 사이즈를 체크한다. */\n");
      out.write("\t    \t        if(fileSize >= maxSize){\n");
      out.write("\t    \t\t\t\talert(\"파일 사이즈 초과\");\n");
      out.write("\t    \t\t\t\treturn false;\n");
      out.write("\t    \t\t\t}\n");
      out.write("\t    \t\t\t/*파일 형식을 체크한다. */\n");
      out.write("\t    \t\t\tif(regex.test(fileName)) {\n");
      out.write("\t    \t\t\t\talert(\"해당 종류의 파일은 업로드 할 수 없습니다.\");\n");
      out.write("\t    \t\t\t\treturn false;\n");
      out.write("\t    \t\t\t}\n");
      out.write("\t    \t\t\treturn true;\n");
      out.write("\t    \t\t}\n");
      out.write("\t    \t    \n");
      out.write("\t    \t    /* change() 해당하는 요소의 value에 변화가 생길 경우 이를 감지하여 등록된 콜백함수를 동작시킨다.  */\n");
      out.write("\t    \t\tvar uploadHandler_htdl = function(e){\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t    \tconsole.log(\"change event\");\n");
      out.write("\t    \t    \t\n");
      out.write("\t    \t    \tlet cloneObj = $(\".uploadFile\").clone();\n");
      out.write("\t    \t        \n");
      out.write("\t    \t        let formData = new FormData();\n");
      out.write("\t    \t        \n");
      out.write("\t    \t        let inputFile = $(\"#js_upload\");\n");
      out.write("\t    \t        \n");
      out.write("\t    \t        let files = inputFile[0].files;\n");
      out.write("\t    \t        \n");
      out.write("\t    \t        let category = \"htdlimgs\";\n");
      out.write("\t    \t        \n");
      out.write("\t    \t\t\tformData.append(\"category\", category);\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t            if(!checkExtension(files[0].name, files[0].size)) {\n");
      out.write("\t    \t                return false;\n");
      out.write("\t    \t            }\n");
      out.write("\t    \t            formData.append(\"uploadFile\", files[0]);\n");
      out.write("\t    \t        \n");
      out.write("\t    \t        $.ajax({\n");
      out.write("\t    \t            url : '/uploadAjaxAction',\n");
      out.write("\t    \t            processData : false,\n");
      out.write("\t    \t            contentType : false, data:\n");
      out.write("\t    \t                formData, type: 'POST',\n");
      out.write("\t    \t                dataType : 'json',\n");
      out.write("\t    \t                success : function(result) {\n");
      out.write("\t    \t                \tshowUploadResult_htdl(result); // 업로드 결과 처리 함수\n");
      out.write("\t    \t               \t \t$(\".form_img_htdl\").html(cloneObj.html()); // 첨부파일 개수 초기화\n");
      out.write("\t    \t               \t \t$(\"#js_upload\").change(uploadHandler_htdl); // 이벤트 등록 (재귀)\n");
      out.write("\t    \t                }\n");
      out.write("\t    \t        })\n");
      out.write("\t    \t    };\n");
      out.write("\t    \t\n");
      out.write("\t    \t    /* 업로드 결과를 누르면 해당 파일을 제거한다.  */\n");
      out.write("\t    \t\tvar deleteHandler_htdl = function(e){\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t\tconsole.log(\"delete file\");\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t\tif(!confirm(\"Remove this file?\"))\n");
      out.write("\t    \t\t\t\t\t\t\treturn;\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t\t  \t\tlet targetFile = $(this).data(\"file\");\n");
      out.write("\t    \t\t\t\t\tconsole.log(targetFile);\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t\t\t\tlet type = $(this).data(\"type\");\n");
      out.write("\t    \t\t\t\t\tconsole.log(type);\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t\t\t\tlet targetLi = $(this).closest(\"li\");\n");
      out.write("\t    \t\t\t\t\tconsole.log(targetLi);\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t\t$.ajax({\n");
      out.write("\t    \t\t\t\t\turl : '/deleteFile',\n");
      out.write("\t    \t\t\t\t\tdata : {fileName : targetFile, type:type},\n");
      out.write("\t    \t\t\t\t\tdataType : 'text',\n");
      out.write("\t    \t\t\t\t\ttype : 'POST',\n");
      out.write("\t    \t\t\t\t\tsuccess : function(result) {\n");
      out.write("\t    \t\t\t\t\t\talert(result);\n");
      out.write("\t    \t\t\t\t\t\ttargetLi.remove();\n");
      out.write("\t    \t\t\t\t\t}\n");
      out.write("\t    \t\t\t\t\t}); // $.ajax\n");
      out.write("\t    \t\t\t};\n");
      out.write("\t    \t\n");
      out.write("\t    \t\tvar showImageHandler_htdl = function(e) {\n");
      out.write("\t    \t    \t\n");
      out.write("\t    \t\t\tif(e.target.type === \"button\")\n");
      out.write("\t    \t    \t\treturn;\n");
      out.write("\t    \t    \t\n");
      out.write("\t    \t        let liObj = $(this);\n");
      out.write("\t    \t        \n");
      out.write("\t    \t        let path = encodeURIComponent(liObj.data(\"path\")+ \"/\" + liObj.data(\"uuid\") +\"_\" +liObj.data(\"filename\"));\n");
      out.write("\t    \t        \n");
      out.write("\t    \t        if(liObj.data(\"type\")){\n");
      out.write("\t    \t            \n");
      out.write("\t    \t            showImage_htdl(path.replace(new RegExp(/\\\\/g), \"/\"));\n");
      out.write("\t    \t        } else {\n");
      out.write("\t    \t            //download\n");
      out.write("\t    \t            self.location = \"/download?fileName=\" + path\n");
      out.write("\t    \t        }\n");
      out.write("\t    \t\t};\n");
      out.write("\t    \t\t\n");
      out.write("\t    \t\t/* submit 타입의 버튼을 제어한다.*/\n");
      out.write("\t    \t\t$(\"#js_upload\").change(uploadHandler_htdl); \n");
      out.write("\t    \t\t$(\".uploadResult_htdl\").on(\"click\", \"button\", deleteHandler_htdl);\n");
      out.write("\t    \t    $(\".uploadResult_htdl\").on(\"click\", \"li\", showImageHandler_htdl);\n");
      out.write("\t    \t\t//$(\".bigPictureWrapper_modify\").on(\"click\",bigImgAniHandler_htdl);\n");
      out.write("\t    \t\t\n");
      out.write("\t    \t\tlet regHtdlFormObj = $(\".regHtdlForm\");\n");
      out.write("\t    \t\t\n");
      out.write("\t    \t\t$(\".regHtdlBtn\").on(\"click\", function(e){\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t\te.preventDefault();\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t\tconsole.log(\"btn click\")\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t\tlet operation = $(this).data(\"oper\");\n");
      out.write("\t    \t\t\tconsole.log(\"operation : \"+operation);\n");
      out.write("\t    \t\t\tlet path = $(\".uploadResult ul li\").data(\"path\");\n");
      out.write("\t    \t\t\tlet fileName = $(\".uploadResult ul li\").data(\"filename\");\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t\tif(operation === 'register'){\n");
      out.write("\t    \t\t\t\t\n");
      out.write("\t    \t\t\t\tfor(let i =0; i< menuBox.length; i++){\n");
      out.write("\t    \t\t\t\t\t//체크된 라벨 input 추가\n");
      out.write("\t    \t\t\t\t\tif(menuBox[i].checked){\t\t\n");
      out.write("\t    \t\t\t\t\t\tconsole.log(i+\"================\");\n");
      out.write("\t    \t\t\t\t\t\tregHtdlFormObj.append(\"<input type='hidden' name='menu[\"+i+\"].name' value='\"+ $(\"label[for='menu\"+i+\"']\").text()+\"'>\");\n");
      out.write("\t    \t\t\t\t\t\tregHtdlFormObj.append(\"<input type='hidden' name='menu[\"+i+\"].price' value='\"+ $(\"#menu\"+i).val()+\"'>\");\n");
      out.write("\t    \t\t\t\t\t\t\t\n");
      out.write("\t    \t\t\t\t\t}\n");
      out.write("\t    \t\t\t\t}\n");
      out.write("\t    \t\t\t\t\n");
      out.write("\t    \t\t\t\tlet filename = \"\";\n");
      out.write("\t    \t\t\t\tfilename += document.querySelector(\".uploadResult_htdl > ul >li\").dataset.path.replace(new RegExp(/\\\\/g),\"/\") + \"/\";\n");
      out.write("\t    \t\t\t\tfilename += document.querySelector(\".uploadResult_htdl > ul >li\").dataset.uuid + \"_\";\n");
      out.write("\t    \t\t\t\tfilename += document.querySelector(\".uploadResult_htdl > ul >li\").dataset.filename;\n");
      out.write("\t    \t\t\t\t\n");
      out.write("\t    \t\t\t\tconsole.log(filename);\n");
      out.write("\t    \t\t\t\t\n");
      out.write("\t    \t\t\t\tregHtdlFormObj.append(\"<input type='hidden' name='htdlPhotoSrc' value='\"+filename + \"'>\");\n");
      out.write("\t    \t\t\t\tregHtdlFormObj.append(\"<input type='hidden' name='intro' value='\"+$(\".regHtdlForm textarea\").val() + \"'>\");\n");
      out.write("\t    \t\t\t\tregHtdlFormObj.append(\"<input type='hidden' name='dcRate' value='\"+$(\"#dcRate\").val() + \"'>\");\n");
      out.write("\t    \t\t\t\t\n");
      out.write("\t    \t\t\t\tlet formData = new FormData();\n");
      out.write("\t    \t\t\t\t\n");
      out.write("\t    \t\t\t\tlet inputData = $(\".regHtdlForm input\");\n");
      out.write("\t    \t\t\t\t\n");
      out.write("\t    \t\t\t\tfor(let i = 0; i < inputData.length; i++){\n");
      out.write("\t    \t\t\t\t\tformData.append($(\".regHtdlForm input\")[i].name, $(\".regHtdlForm input\")[i].value)\n");
      out.write("\t    \t\t\t\t}\n");
      out.write("\t    \t\t\t\t\n");
      out.write("\t    \t\t\t\tlet test = document.querySelectorAll(\".regHtdlForm input\");\n");
      out.write("\t    \t\t\t\tconsole.log(test);\n");
      out.write("\t    \t\t\t\t\n");
      out.write("\t    \t\t\t\t$.ajax({\n");
      out.write("\t    \t\t            url : '/dealight/business/manage/board/htdl/new',\n");
      out.write("\t    \t\t            processData : false,\n");
      out.write("\t    \t\t            contentType : false, data:\n");
      out.write("\t    \t\t                formData, type: 'POST',\n");
      out.write("\t    \t\t                dataType : 'json',\n");
      out.write("\t    \t\t                success : function(result) {\n");
      out.write("\t    \t\t                \talert(result);\n");
      out.write("\t    \t\t                \tconsole.log(result);\n");
      out.write("\t    \t\t\t        \t\tmodal.find(\"ul\").html(\"\");\n");
      out.write("\t    \t\t\t    \t\t\tmodal.find(\"input\").val(\"\");\n");
      out.write("\t    \t\t\t    \t\t\tmodal.css(\"display\",\"none\");\n");
      out.write("\t    \t\t                }\n");
      out.write("\t    \t\t        })\n");
      out.write("\t    \t\t        alert(\"핫딜을 등록하셨습니다.\");\n");
      out.write("\t    \t\t\t\tsetTimeout(()=>{\n");
      out.write("\t    \t\t\t\t\tmodal.find(\"ul\").html(\"\");\n");
      out.write("\t\t    \t\t\t\tmodal.find(\"input\").val(\"\");\n");
      out.write("\t\t    \t\t\t\tmodal.css(\"display\",\"none\");\n");
      out.write("\t\t    \t\t\t\t$(\".alert.manage_htdl\").addClass(\"hide\");\n");
      out.write("\t\t    \t    \t\t$(\".alert.manage_htdl\").removeClass(\"show\");\n");
      out.write("\t    \t\t\t\t},500)\n");
      out.write("\t    \t\t\t\t//regHtdlFormObj.submit();\n");
      out.write("\t    \t\t\t\t\n");
      out.write("\t    \t\t\t}else if(operation === 'refuse'){\n");
      out.write("\t    \t\t\t\talert(\"핫딜이 거절 되었습니다.\");\n");
      out.write("\t    \t    \t\tmodal.css(\"display\",\"none\");\n");
      out.write("\t    \t    \t\tmodal.find(\"ul\").html(\"\");\n");
      out.write("\t    \t    \t\tmodal.find(\".content_div\").html(\"\");\n");
      out.write("\t    \t    \t\tmodal.find(\".content_div\").css(\"display\",\"none\");\n");
      out.write("\t    \t    \t\t$(\".alert.manage_htdl\").addClass(\"hide\");\n");
      out.write("\t    \t    \t\t$(\".alert.manage_htdl\").removeClass(\"show\");\n");
      out.write("\t    \t\t\t}\n");
      out.write("\t    \t\t\t\n");
      out.write("\t    \t\t}); // reg btn click\n");
      out.write("        \t});// end get menuList\n");
      out.write("        \t\n");
      out.write("        \t\n");
      out.write("        }; // end show  reg htdl\n");
      out.write("        \n");
      out.write("        let showRegHtdlHandler = function(e) {\n");
      out.write("        \t\n");
      out.write("        \tif(confirm(\"핫딜을 등록하시겠습니까?\")){\n");
      out.write("        \t\tshowRegHtdl(storeId);\n");
      out.write("        \t\tmodal.css(\"display\",\"block\");        \t\t\n");
      out.write("        \t}\n");
      out.write("        }\n");
      out.write("        btnAcceptHtdl.on(\"click\",showRegHtdlHandler);\n");
      out.write("        \n");
      out.write("        /* 이벤트 처리*/\n");
      out.write("        \n");
      out.write("        /*현황판 토글*/\n");
      out.write("\n");
      out.write("\t\tlet switchBoard = $(\".switch_board\");\n");
      out.write("\t\tlet switchRsvdRslt = $(\".switch_rsvd_rslt\");\n");
      out.write("        \n");
      out.write("        let switchBoardHandler = function(e){\n");
      out.write("\t\t\t\n");
      out.write("        \tlet storeId = ");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${storeId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write(";\n");
      out.write("\t\t\t\n");
      out.write("\t\t\te.preventDefault();\n");
      out.write("\t\t\t\n");
      out.write("\t\t\tif($(\"#board\").css(\"display\") === 'none'){\n");
      out.write("\t\t\t\t// debug\n");
      out.write("\t\t\t\t//console.log(\"board none => block\");\n");
      out.write("\t\t\t\t//$(\".switch\").text('매장관리');\n");
      out.write("\t\t\t\tshowBoard(storeId);\n");
      out.write("\t\t\t\t$(\"#rsvd_rslt_baord\").css(\"display\", \"none\");\n");
      out.write("\t\t\t\t$(\"#board\").css(\"display\", \"flex\");\n");
      out.write("\t\t\t\t$(document.getElementsByClassName(\"tab_items\")).removeClass(\"curTab\");\n");
      out.write("\t\t\t\t$(\".switch_rsvd_rslt\").css(\"color\", \"black\")\n");
      out.write("\t\t\t\t$(e.target.parentNode).addClass(\"curTab\");\n");
      out.write("\t\t\t\t$(\".switch_board\").css(\"color\",\"white\");\n");
      out.write("\t\t\t\t//$(\".switch_board\").css(\"color\", \"#fff\").css(\"background\",\"#343436\");\n");
      out.write("\t\t\t\t//$(\".switch_rsvd_rslt\").css(\"color\", \"#000\").css(\"background\",\"#fff\");\n");
      out.write("\t\t\t}\n");
      out.write("        }\n");
      out.write("\t\t\n");
      out.write("        let switchRsvdRsltHandler = function(e){\n");
      out.write("\t\t\t\n");
      out.write("        \tlet storeId = ");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${storeId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write(";\n");
      out.write("\t\t\t\n");
      out.write("\t\t\te.preventDefault();\n");
      out.write("\t\t\t\n");
      out.write("\t\t\tif($(\"#rsvd_rslt_baord\").css(\"display\") === 'none'){\n");
      out.write("\t\t\t\t// debug\n");
      out.write("\t\t\t\t//console.log(\"rsvd rslt board none => block\");\n");
      out.write("\t\t\t\t//$(\".switch\").text('현황판');\n");
      out.write("\t\t\t\tshowRsvdBoard(storeId);\n");
      out.write("\t\t\t\t$(\"#board\").css(\"display\", \"none\");\n");
      out.write("\t\t\t\t$(\"#rsvd_rslt_baord\").css(\"display\", \"block\");\n");
      out.write("\t\t\t\t$(document.getElementsByClassName(\"tab_items\")).removeClass(\"curTab\");\n");
      out.write("\t\t\t\t$(\".switch_board\").css(\"color\", \"black\")\n");
      out.write("\t\t\t\t$(e.target.parentNode).addClass(\"curTab\");\n");
      out.write("\t\t\t\t$(\".switch_rsvd_rslt\").css(\"color\",\"white\");\n");
      out.write("\t\t\t\t//$(\".switch_rsvd_rslt\").css(\"color\", \"#fff\").css(\"background\",\"#343436\");\n");
      out.write("\t\t\t\t//$(\".switch_board\").css(\"color\", \"#000\").css(\"background\",\"#fff\");\n");
      out.write("\t\t\t}\n");
      out.write("\t\t\t\n");
      out.write("        }\n");
      out.write("        \n");
      out.write("\n");
      out.write("        switchBoard.on(\"click\", switchBoardHandler);\n");
      out.write("        switchRsvdRslt.on(\"click\", switchRsvdRsltHandler);\n");
      out.write("\t\t\n");
      out.write("        /*당일 예약 결과 가져오기*/\n");
      out.write("        $(\"#btn_rsvd_rslt\").on(\"click\",switchRsvdRsltHandler);\n");
      out.write("\n");
      out.write("        /*새로고침*/\n");
      out.write("        $(\"#refresh\").on(\"click\", e => {\n");
      out.write("        \t// debug\n");
      out.write("        \t//console.log(\"show board...\")\n");
      out.write("        \tshowBoard(storeId);\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        \n");
      out.write("        let showUserRsvdListHandler = function(e) {\n");
      out.write("        \t\n");
      out.write("        \tlet rstoreId = $(e.target).parent().find(\".btnStoreId\").text(),\n");
      out.write("    \t\truserId = $(e.target).parent().find(\".btnUserId\").text();\n");
      out.write("        \tconsole.log(\"======================\");\n");
      out.write("        \tconsole.log(rstoreId);\n");
      out.write("        \tconsole.log(ruserId);\n");
      out.write("        \t\n");
      out.write("    \t\tif(!rstoreId){\n");
      out.write("    \t\t\trstoreId = $(e.target).parent().parent().find(\".btnStoreId\").text();\n");
      out.write("        \t\truserId = $(e.target).parent().parent().find(\".btnUserId\").text();\n");
      out.write("    \t\t}\n");
      out.write("        \t\n");
      out.write("    \t\tmodal.css(\"display\",\"block\");\n");
      out.write("\n");
      out.write("    \t\tshowUserRsvdList(rstoreId, ruserId);\n");
      out.write("        }\n");
      out.write("        /*예약리스트에 있는 내용 중, 예약 상세 보여주기*/\n");
      out.write("        /*회원의 예약 리스트 보여주기*/\n");
      out.write("        $(\".btnRsvd\").on(\"click\", showUserRsvdListHandler);\n");
      out.write("        \t\n");
      out.write("        /* 웨이팅 등록 */\n");
      out.write("        $(\".btn_wait_register\").on(\"click\", e => {\n");
      out.write("        \t\n");
      out.write("        \tmodal.css(\"display\",\"block\");\n");
      out.write("        \tshowWaitRegisterForm(storeId);\n");
      out.write("        \t\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        let changeSeatStusHandler = function(e) {\n");
      out.write("        \t\n");
      out.write("            e.preventDefault();\n");
      out.write("            \n");
      out.write("            let color = \"\";\n");
      out.write("\n");
      out.write("            let param = {};\n");
      out.write("            param.storeId = storeId;\n");
      out.write("            \n");
      out.write("            if(e.target.dataset.color) param.seatStusCd = e.target.dataset.color[0];\n");
      out.write("            if(e.target.parentNode.dataset.color) param.seatStusCd = e.target.parentNode.dataset.color[0];\n");
      out.write("            if(e.target.parentNode.parentNode.dataset.color) param.seatStusCd = e.target.parentNode.parentNode.dataset.color[0];\n");
      out.write("            \n");
      out.write("            //param.seatStusCd = e.target.dataset.color[0];\n");
      out.write("            $(\".btn_seat_stus\").removeClass(\"curStus\");\n");
      out.write("            e.target.className += \" curStus\";\n");
      out.write("            \n");
      out.write("        \tboardService.putChangeStatusCd(param, function(result){\n");
      out.write("            \tshowStoreInfo(param.storeId);\n");
      out.write("        \t});\n");
      out.write("        }\n");
      out.write("        /* 매장 착석 상태 처리*/\n");
      out.write("        $(\".btn_seat_stus\").on(\"click\",changeSeatStusHandler);\n");
      out.write("        \n");
      out.write("        let waitEnterHandler = function(e) {\n");
      out.write("        \t\n");
      out.write("        \t/*dom 코드는 변경될 가능성 있음*/\n");
      out.write("        \tlet waitId = parseInt(document.querySelector(\".nextWait .wait_name\").dataset.id);\n");
      out.write("\n");
      out.write("        \tboardService.putEnterWaiting(waitId, function(result){\n");
      out.write("        \t\t//alert(result);\n");
      out.write("        \t\tshowWaitList(storeId);\n");
      out.write("        \t});\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        /*웨이팅 입장 처리*/\n");
      out.write("        $(\".btn_enter_wait\").on(\"click\", waitEnterHandler);\n");
      out.write("        let waitNoshowHandler = function(e){\n");
      out.write("        \t\n");
      out.write("        \t/*dom 코드는 변경될 가능성 있음*/\n");
      out.write("        \tlet waitId = parseInt(document.querySelector(\".nextWait .wait_name\").dataset.id);\n");
      out.write("\n");
      out.write("        \tboardService.putNoshowWaiting(waitId, function(result){\n");
      out.write("        \t\t//alert(result);\n");
      out.write("\t        \tshowWaitList(storeId);\n");
      out.write("        \t});\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        /*웨이팅 노쇼 처리*/\n");
      out.write("        $(\".btn_noshow_wait\").on(\"click\", waitNoshowHandler);\n");
      out.write("        \n");
      out.write("        \n");
      out.write("        /* web socket!!!!!!!!!!!!!!!!!!!!*/\n");
      out.write("        /* \t<div id=\"socketAlert\" class=\"alert alert-success\" role=\"alert\"\">알림!!!</div> */\n");
      out.write("        let socket = null;\n");
      out.write("   \t \n");
      out.write("\t   \tfunction connectWS() {\n");
      out.write("\t   \t\t// 전역변수 socket을 선언한다.\n");
      out.write("\t   \t\t// 다른 페이지 어디서든 소켓을 불러올 수 있어야 하기 때문이다.\n");
      out.write("\t   \t\t\n");
      out.write("\t   \t \t// 소켓을 ws로 연다.\n");
      out.write("\t   \t \tvar ws = new WebSocket(\"ws://localhost:8181/manageSocket\");\n");
      out.write("\t   \t \tsocket = ws;\n");
      out.write("\t\n");
      out.write("\t   \t \t// 커넥션이 연결되었는지 확인한다.\n");
      out.write("\t   \t \tws.onopen = function () {\n");
      out.write("\t   \t \t    console.log('Info: connection opened.');\n");
      out.write("\t   \t \t};\n");
      out.write("\t\n");
      out.write("\t   \t \t\n");
      out.write("\t   \t \t// 받은 메시지를 출력한다.\n");
      out.write("\t   \t \t// 메시지를 수신한 이벤트 핸들러와 같다.\n");
      out.write("\t   \t \tws.onmessage = function (event) {\n");
      out.write("\t   \t \t    console.log(\"ReceiveMessage : \", event.data+'\\n');\n");
      out.write("\t   \t \t    \n");
      out.write("\t   \t \t    // 추후에 message 형식을 JSON으로 변환해서 message type을 지정해줘야 한다.\n");
      out.write("\t   \t \t    //if()\n");
      out.write("\t   \t \t    \t\n");
      out.write("\t   \t \t   \t//alert(event.data);\n");
      out.write("\t   \t \t    console.log(typeof event.data);\n");
      out.write("\t   \t \t    \n");
      out.write("\t   \t \t    let data = JSON.parse(event.data);\n");
      out.write("\t   \t \t    \n");
      out.write("\t   \t \t    console.log(typeof data);\n");
      out.write("\t   \t \t    console.log(\"cmd : \"+data.cmd);\n");
      out.write("\t   \t \t\tconsole.log(\"sendUser : \"+data.sendUser);\n");
      out.write("\t   \t \t    console.log(\"storeId : \"+data.storeId);\n");
      out.write("\t   \t \t    console.log(\"dto : \" + data.htdlDto);\n");
      out.write("\t   \t \t    \n");
      out.write("\t\t\t\tlet curNotiCnt = $(\".show\").length;\n");
      out.write("\t \t    \n");
      out.write("\t \t    \tconsole.log(\"curNotiCnt : \"+curNotiCnt);\n");
      out.write("\t \t    \t\n");
      out.write("\t \t    \tlet dtoSpan =\"\";\n");
      out.write("\t \t    \t//let dtoSpan = \"<span class='manage_htdl_dto' data-name='\"+dto.name+\"' data-startNm='\"+dto.startNm+\"' data-endTm='\"+dto.endTm+\"' data-lmtPnum='\"+dto.lmtPnum+\"' ></span>\"\n");
      out.write("\t \t    \tif(data.htdlDto) dtoSpan = \"<span class='manage_htdl_dto' data-name='\"+data.htdlDto.name+\"' data-startTm='\"+data.htdlDto.startTm+\"' data-endTm='\"+data.htdlDto.endTm+\"' data-lmtPnum='\"+data.htdlDto.lmtPnum+\"' ></span>\"\n");
      out.write("\t   \t \t    \n");
      out.write("\t\t\t\tif(data.cmd === 'rsvd'){\n");
      out.write("\t\t   \t \t\tshowRsvdList(storeId);\n");
      out.write("\t\t   \t \t\tshowRsvdMap(storeId);\n");
      out.write("\t\t   \t \t\t$('.alert.manage_rsvd .alert_tit').html('예약 알림');\n");
      out.write("\t\t   \t \t\t$('.alert.manage_rsvd .alert_senduser').html(data.sendUser);\n");
      out.write("\t\t   \t \t\t$('.alert.manage_rsvd .alert_msg').html(data.msg);\n");
      out.write("\t\t   \t \t\tdocument.getElementsByClassName(\"manage_rsvd\")[0].style.bottom = 15 + curNotiCnt*75;\n");
      out.write("\t\t   \t \t\t$('.alert.manage_rsvd').removeClass(\"hide\");\n");
      out.write("\t\t   \t \t\t$('.alert.manage_rsvd').addClass(\"show\");\n");
      out.write("\t\t   \t \t\t$('.alert.manage_rsvd').addClass(\"showAlert\");\n");
      out.write("\t\t   \t \t\tconsole.log(data.msg);\n");
      out.write("\t\t\t\t} else if (data.cmd === 'wait'){\n");
      out.write("\t\t   \t \t\tshowWaitList(storeId);\n");
      out.write("\t\t   \t \t\t$('.alert.manage_wait .alert_tit').html('웨이팅 알림');\n");
      out.write("\t\t   \t \t\t$('.alert.manage_wait .alert_senduser').html(data.sendUser);\n");
      out.write("\t\t   \t\t\t$('.alert.manage_wait .alert_msg').html(data.msg);\n");
      out.write("\t\t   \t\t\tdocument.getElementsByClassName(\"manage_wait\")[0].style.bottom = 15 + curNotiCnt*75;\n");
      out.write("\t\t   \t\t\t$('.alert.manage_wait').removeClass(\"hide\");\n");
      out.write("\t\t   \t \t\t$('.alert.manage_wait').addClass(\"show\");\n");
      out.write("\t\t   \t \t\t$('.alert.manage_wait').addClass(\"showAlert\");\n");
      out.write("\t\t\t\t} else if (data.cmd === 'htdl') {\n");
      out.write("\t\t   \t \t\t$('.alert.manage_htdl .alert_tit').html('핫딜 알림');\n");
      out.write("\t\t   \t \t\t//$('.alert.manage_htdl .alert_senduser').html(data.sendUser);\n");
      out.write("\t\t   \t\t\t$('.alert.manage_htdl .alert_msg').html(data.msg);\n");
      out.write("\t\t   \t\t\t$('.alert_dto').html(dtoSpan);\n");
      out.write("\t\t   \t\t\t$('.alert.manage_htdl').removeClass(\"hide\");\n");
      out.write("\t\t   \t \t\t$('.alert.manage_htdl').addClass(\"show\");\n");
      out.write("\t\t   \t \t\t$('.alert.manage_htdl').addClass(\"showAlert\");\n");
      out.write("\t\t   \t \t\t\n");
      out.write("\t\t   \t \t\t// 핫딜 넘어오는 데이터 storeid, start tm, end tm, htdl name, \n");
      out.write("\t\t   \t \t\t// \n");
      out.write("\t\t\t\t}\n");
      out.write("\t   \t \t    \n");
      out.write("\t   \t \t    //let socketAlert = $('#socektAlert');\n");
      out.write("\t   \t \t\t//socketAlert.html(event.data);\n");
      out.write("\t   \t \t    //socketAlert.css('display','block');\n");
      out.write("\t\t\t    \n");
      out.write("\t\t\t    // 메시지가 3초 있다가 자동으로 사라지게\n");
      out.write("\t\t\t    /*\t\n");
      out.write("\t\t\t    setTimeout( function(){\n");
      out.write("\t\t\t    \t\n");
      out.write("\t\t\t    \t$socketAlert.css('display','none');\n");
      out.write("\t\t\t    },3000);\n");
      out.write("\t   \t \t    */\n");
      out.write("\t\t\t    \n");
      out.write("\t\t\t    /*\n");
      out.write("\t   \t \t    let socketAlert = $('#socektAlert');\n");
      out.write("\t   \t \t\tsocketAlert.innerHTML = event.data;\n");
      out.write("\t   \t \t    socketAlert.style.display = \"block\";\n");
      out.write("\t   \t \t   \tshowWaitList(storeId);\n");
      out.write("\t   \t \t    */\n");
      out.write("\t   \t \t   \t\n");
      out.write("\t   \t \t    // 메시지가 3초 있다가 자동으로 사라지게\n");
      out.write("\t   \t \t    /*\n");
      out.write("\t   \t \t    setTimeout( function(){\n");
      out.write("\t   \t \t    \t\n");
      out.write("\t   \t \t    \t$socketAlert.css('display','none');\n");
      out.write("\t   \t \t    },3000);\n");
      out.write("\t   \t \t    */\n");
      out.write("\t   \t \t};\n");
      out.write("\t\n");
      out.write("\t\n");
      out.write("\t   \t \t// connection을 닫는다.\n");
      out.write("\t   \t \tws.onclose = function (event) {\n");
      out.write("\t   \t \t\tconsole.log('Info: connection closed.');\n");
      out.write("\t   \t \t\t//setTimeout( function(){ connect(); }, 1000); // retry connection!!\n");
      out.write("\t   \t \t};\n");
      out.write("\t   \t \tws.onerror = function (event) { console.log('Error'); };\n");
      out.write("\t   \t \t\n");
      out.write("\t   \t }\n");
      out.write("\t   \t\t\n");
      out.write("\t   \t\t// input 내용을 socket에 send\n");
      out.write("\t   \t\t$('#btnSend').on('click', function(evt) {\n");
      out.write("\t   \t\t\t  evt.preventDefault();\n");
      out.write("\t   \t\t\tif (socket.readyState !== 1) return;\n");
      out.write("\t   \t\t\t\t  let msg = $('input#msg').val();\n");
      out.write("\t   \t\t\t\t  socket.send(msg);\n");
      out.write("\t   \t\t\t});\n");
      out.write("\t   \t\t\n");
      out.write("\t   \t\tconnectWS();\n");
      out.write("   });\n");
      out.write("\t\n");
      out.write("    /* get store img (즉시실행함수)*/\n");
      out.write("    $(document).ready(function() {\n");
      out.write("    \t\n");
      out.write("\n");
      out.write("        (function(){\n");
      out.write("            \n");
      out.write("        \tlet storeId = ");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${storeId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write(";\n");
      out.write("            \n");
      out.write("            $.getJSON(\"/dealight/business/manage/getStoreImgs\", {storeId:storeId}, function(imgs){\n");
      out.write("                \n");
      out.write("            \t// debug\n");
      out.write("                //console.log(\"즉시 함수..\");\n");
      out.write("                //console.log(imgs);\n");
      out.write("                \n");
      out.write("                let str = \"\";\n");
      out.write("                \n");
      out.write("                $(imgs).each(function(i, img){\n");
      out.write("                \t\n");
      out.write("                \t// debug\n");
      out.write("                \t//console.log(img);\n");
      out.write("                    \n");
      out.write("                    // image type\n");
      out.write("                    if(img.image) {\n");
      out.write("                        \n");
      out.write("                        let fileCallPath = encodeURIComponent(img.uploadPath+\"/s_\" +img.uuid + \"_\" +img.fileName);\n");
      out.write("                        \n");
      out.write("                        str += \"<li data-path='\" + img.uploadPath + \"'data-uuid='\" + img.uuid + \"'data-filename='\"\n");
      out.write("                            + img.fileName +\"'data-type='\" + img.image+\"'><div>\";\n");
      out.write("                        str += \"<img src='/display?fileName=\" + fileCallPath+\"'>\";\n");
      out.write("                        str += \"</li>\";\n");
      out.write("                        \n");
      out.write("                    } else {\n");
      out.write("                        \n");
      out.write("                        str += \"<li data-path='\" + img.uploadPath +\"' data-uuid='\" + img.uuid \n");
      out.write("                                +\"' data-filename='\" + img.fileName +\"' data-type='\" + img.image+\"'><div>\";\n");
      out.write("                        str += \"<span>\" + img.fileName+\"</span><br/>\";\n");
      out.write("                        str += \"<img src='/resources/img/attach.png'>\";\n");
      out.write("                        str += \"</div>\";\n");
      out.write("                        str += \"</li>\";\n");
      out.write("                    }\n");
      out.write("                });\n");
      out.write("                \n");
      out.write("                $(\".uploadResult ul\").html(str);\n");
      out.write("                \n");
      out.write("            }); // end getjson\n");
      out.write("            \n");
      out.write("        })(); // end function\n");
      out.write("\n");
      out.write("        \n");
      out.write("        $(\".uploadResult\").on(\"click\", \"li\", function(e){\n");
      out.write("            \n");
      out.write("        \t// debug\n");
      out.write("            // console.log(\"view image\");\n");
      out.write("            \n");
      out.write("            let liObj = $(this);\n");
      out.write("            \n");
      out.write("            let path = encodeURIComponent(liObj.data(\"path\")+ \"/\" + liObj.data(\"uuid\") +\"_\" +liObj.data(\"filename\"));\n");
      out.write("            \n");
      out.write("            if(liObj.data(\"type\")){\n");
      out.write("                \n");
      out.write("                showImage(path.replace(new RegExp(/\\\\/g), \"/\"));\n");
      out.write("            } else {\n");
      out.write("                //download\n");
      out.write("                self.location = \"/download?fileName=\" + path\n");
      out.write("            }\n");
      out.write("        });\n");
      out.write("        \n");
      out.write("        function showImage(fileCallPath) {\n");
      out.write("            \n");
      out.write("            alert(fileCallPath);\n");
      out.write("            \n");
      out.write("            $(\".bigPictureWrapper\").css(\"display\", \"flex\").show();\n");
      out.write("            \n");
      out.write("            $(\".bigPicture\")\n");
      out.write("            .html(\"<img src='/display?fileName=\" + fileCallPath +\"'>\")\n");
      out.write("            .animate({width:'100%',height:'100%'},1000);\n");
      out.write("            \n");
      out.write("        }\n");
      out.write("        \n");
      out.write("        $(\".bigPictureWrapper\").on(\"click\",function(e){\n");
      out.write("            $(\".bigPicture\").animate({width : '0%', height : '0%'}, 1000);\n");
      out.write("            setTimeout(function(){\n");
      out.write("                $('.bigPictureWrapper').hide();\n");
      out.write("            },1000);\n");
      out.write("        })\n");
      out.write("\n");
      out.write("\n");
      out.write("        var operForm = $(\"#operForm\");\n");
      out.write("        \n");
      out.write("        $(\"button[data-oper='modify']\").on(\"click\", function(e){\n");
      out.write("            \n");
      out.write("            operForm.attr(\"action\", \"/board/modify\").submit();\n");
      out.write("            \n");
      out.write("        });\n");
      out.write("        \n");
      out.write("        $(\"button[data-oper='list']\").on(\"click\",function(e){\n");
      out.write("            \n");
      out.write("            operForm.find(\"#bno\").remove();\n");
      out.write("            operForm.attr(\"action\",\"/board/list\");\n");
      out.write("            operForm.submit();\n");
      out.write("            \n");
      out.write("        });\n");
      out.write("        \n");
      out.write("    });\n");
      out.write("\n");
      out.write("    </script>\n");
      out.write(" ");
      out.write("\n");
      out.write("    <footer class=\"main_footer\">\n");
      out.write("        <div class=\"footer_wrapper\">\n");
      out.write("        <div class=\"footer_top\">\n");
      out.write("            <div class=\"footer_container_left\">\n");
      out.write("                <div><div class=\"item_left cs_center\"><div>행복 고객 센터</div></div>\n");
      out.write("                <div class=\"item_right\"></div></div>\n");
      out.write("                <div><div class=\"item_left telno\">1644-0000</div>\n");
      out.write("                <div class=\"item_right\"><span class=\"footer_tit\">365 고객 센터</span><span class=\"footer_cnts\">오전 7시 - 오전 9시</span></div></div>\n");
      out.write("                <div><div class=\"item_left\"><button>카카오톡 문의</button></div>\n");
      out.write("                <div class=\"item_right\"><span class=\"footer_tit\">365 고객 센터</span><span class=\"footer_cnts\">오전 7시 - 오전 9시</span></div></div>\n");
      out.write("                <div><div class=\"item_left\"><button>1:1 문의</button></div>\n");
      out.write("                <div class=\"item_right\"><span class=\"footer_tit\">365 고객 센터</span><span class=\"footer_cnts\">오전 7시 - 오전 9시</span></div></div>\n");
      out.write("            </div>\n");
      out.write("            <div class=\"footer_container_right\">\n");
      out.write("                <div class=\"footer_list_wrapper\"><ul class=\"footer_list\">\n");
      out.write("                    <li><a href=\"#\">딜라이트 소개</a></li>\n");
      out.write("                    <li><a href=\"/dealight/mypage/bizauth/list\">사업자 등록</a></li>\n");
      out.write("                    <li><a href=\"/dealight/custservice/\">FAQ</a></li>\n");
      out.write("                    <li><a href=\"/dealight/custservice/qnalist\">QNA</a></li>\n");
      out.write("                    <li><a href=\"#\">이용약관</a></li>\n");
      out.write("                    <li><a href=\"#\">이용안내</a></li>\n");
      out.write("                </ul></div>\n");
      out.write("                <div>법인명(상호) : 주식회사 딜라이트 <span class=\"footer_bar\">|</span> 사업자등록번호 : 000-00-00000</div>\n");
      out.write("                <div>통신판매업 : 제 2000-서울종로-0000호 <span class=\"footer_bar\">|</span> 개인정보보호책임자 : 임종우</div>\n");
      out.write("                <div>주소 : 서울 종로구 종로 69 서울YMCA <span class=\"footer_bar\">|</span> 대표이사 : 이현중</div>\n");
      out.write("                <div>사업자 등록 : 사업자 등록하기 <span class=\"footer_bar\">|</span> 제휴문의 : business@dealight.com</div>\n");
      out.write("                <div>채용문의 : recruit@dealight.com</div>\n");
      out.write("                <div>팩스 : 000-0000-0000 <span class=\"bar\">|</span> 이메일 : help@dealight.com</div>\n");
      out.write("                <em>© DEALIGHT CORP. ALL RIGHTS RESERVED</em>\n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("        <div class=\"footer_bottom\">\n");
      out.write("            <div></div>\n");
      out.write("            <div></div>\n");
      out.write("            <div></div>\n");
      out.write("        </div>\n");
      out.write("    </div>\n");
      out.write("</footer>");
      out.write("\n");
      out.write(" <script src=\"/resources/js/clock.js\"></script>\n");
      out.write("</body>\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }

  private boolean _jspx_meth_c_005fif_005f0(javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:if
    org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f0 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
    boolean _jspx_th_c_005fif_005f0_reused = false;
    try {
      _jspx_th_c_005fif_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fif_005f0.setParent(null);
      // /WEB-INF/views/dealight/business/manage/../../../includes/mainMenu.jsp(271,41) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fif_005f0.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${userId != null}", boolean.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fif_005f0 = _jspx_th_c_005fif_005f0.doStartTag();
      if (_jspx_eval_c_005fif_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write(" <span id=\"nav_user_id\">");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${userName }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("님</span>");
          int evalDoAfterBody = _jspx_th_c_005fif_005f0.doAfterBody();
          if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fif_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f0);
      _jspx_th_c_005fif_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_sec_005fauthorize_005f0(javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  sec:authorize
    org.springframework.security.taglibs.authz.JspAuthorizeTag _jspx_th_sec_005fauthorize_005f0 = (org.springframework.security.taglibs.authz.JspAuthorizeTag) _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess.get(org.springframework.security.taglibs.authz.JspAuthorizeTag.class);
    boolean _jspx_th_sec_005fauthorize_005f0_reused = false;
    try {
      _jspx_th_sec_005fauthorize_005f0.setPageContext(_jspx_page_context);
      _jspx_th_sec_005fauthorize_005f0.setParent(null);
      // /WEB-INF/views/dealight/business/manage/../../../includes/mainMenu.jsp(282,6) name = access type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_sec_005fauthorize_005f0.setAccess("isAnonymous()");
      int _jspx_eval_sec_005fauthorize_005f0 = _jspx_th_sec_005fauthorize_005f0.doStartTag();
      if (_jspx_eval_sec_005fauthorize_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
        out.write("\n");
        out.write("\t\t\t\t\t\t\t\t<div class=\"account_cnts\"><a href=\"/dealight/login\">로그인</a></div>\n");
        out.write("\t\t\t\t\t\t\t\t<div class=\"account_cnts\"><a href=\"/dealight/register\">회원가입</a></div>\n");
        out.write("\t\t\t\t\t\t");
      }
      if (_jspx_th_sec_005fauthorize_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess.reuse(_jspx_th_sec_005fauthorize_005f0);
      _jspx_th_sec_005fauthorize_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_sec_005fauthorize_005f0, _jsp_getInstanceManager(), _jspx_th_sec_005fauthorize_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_sec_005fauthorize_005f1(javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  sec:authorize
    org.springframework.security.taglibs.authz.JspAuthorizeTag _jspx_th_sec_005fauthorize_005f1 = (org.springframework.security.taglibs.authz.JspAuthorizeTag) _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess.get(org.springframework.security.taglibs.authz.JspAuthorizeTag.class);
    boolean _jspx_th_sec_005fauthorize_005f1_reused = false;
    try {
      _jspx_th_sec_005fauthorize_005f1.setPageContext(_jspx_page_context);
      _jspx_th_sec_005fauthorize_005f1.setParent(null);
      // /WEB-INF/views/dealight/business/manage/../../../includes/mainMenu.jsp(286,6) name = access type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_sec_005fauthorize_005f1.setAccess("isAuthenticated()");
      int _jspx_eval_sec_005fauthorize_005f1 = _jspx_th_sec_005fauthorize_005f1.doStartTag();
      if (_jspx_eval_sec_005fauthorize_005f1 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
        out.write("\n");
        out.write("\t\t\t\t\t\t\t");
        if (_jspx_meth_sec_005fauthorize_005f2(_jspx_th_sec_005fauthorize_005f1, _jspx_page_context))
          return true;
        out.write("\n");
        out.write("\t\t\t\t\t\t\t");
        if (_jspx_meth_sec_005fauthorize_005f3(_jspx_th_sec_005fauthorize_005f1, _jspx_page_context))
          return true;
        out.write("\n");
        out.write("\t\t\t\t\t\t\t");
        if (_jspx_meth_sec_005fauthorize_005f4(_jspx_th_sec_005fauthorize_005f1, _jspx_page_context))
          return true;
        out.write("\n");
        out.write("\t\t\t\t\t\t\t\t<div class=\"account_cnts\"><a href=\"/dealight/mypage/get\">회원정보수정</a></div>\n");
        out.write("\t\t\t\t\t\t\t\t<div class=\"account_cnts\"><a href=\"dealight/logout\" onclick=\"submit(event)\">로그아웃</a></div>\n");
        out.write("\t\t\t\t\t\t");
      }
      if (_jspx_th_sec_005fauthorize_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess.reuse(_jspx_th_sec_005fauthorize_005f1);
      _jspx_th_sec_005fauthorize_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_sec_005fauthorize_005f1, _jsp_getInstanceManager(), _jspx_th_sec_005fauthorize_005f1_reused);
    }
    return false;
  }

  private boolean _jspx_meth_sec_005fauthorize_005f2(javax.servlet.jsp.tagext.JspTag _jspx_th_sec_005fauthorize_005f1, javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  sec:authorize
    org.springframework.security.taglibs.authz.JspAuthorizeTag _jspx_th_sec_005fauthorize_005f2 = (org.springframework.security.taglibs.authz.JspAuthorizeTag) _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess.get(org.springframework.security.taglibs.authz.JspAuthorizeTag.class);
    boolean _jspx_th_sec_005fauthorize_005f2_reused = false;
    try {
      _jspx_th_sec_005fauthorize_005f2.setPageContext(_jspx_page_context);
      _jspx_th_sec_005fauthorize_005f2.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_sec_005fauthorize_005f1);
      // /WEB-INF/views/dealight/business/manage/../../../includes/mainMenu.jsp(287,7) name = access type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_sec_005fauthorize_005f2.setAccess("hasRole('ROLE_USER')");
      int _jspx_eval_sec_005fauthorize_005f2 = _jspx_th_sec_005fauthorize_005f2.doStartTag();
      if (_jspx_eval_sec_005fauthorize_005f2 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
        out.write("\n");
        out.write("\t\t\t\t\t\t\t\t<div class=\"account_cnts\"><a href=\"/dealight/mypage/reservation\">예약 내역</a></div> \n");
        out.write("\t\t\t\t\t\t\t\t<div class=\"account_cnts\"><a href=\"/dealight/mypage/wait\">웨이팅 내역</a></div>\n");
        out.write("\t\t\t\t\t\t\t\t<div class=\"account_cnts\"><a href=\"/dealight/mypage/review/\">나의 리뷰</a></div>\n");
        out.write("\t\t\t\t\t\t\t\t<div class=\"account_cnts\"><a href=\"/dealight/mypage/like\">찜 목록</a> </div>\n");
        out.write("\t\t\t\t\t\t\t");
      }
      if (_jspx_th_sec_005fauthorize_005f2.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess.reuse(_jspx_th_sec_005fauthorize_005f2);
      _jspx_th_sec_005fauthorize_005f2_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_sec_005fauthorize_005f2, _jsp_getInstanceManager(), _jspx_th_sec_005fauthorize_005f2_reused);
    }
    return false;
  }

  private boolean _jspx_meth_sec_005fauthorize_005f3(javax.servlet.jsp.tagext.JspTag _jspx_th_sec_005fauthorize_005f1, javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  sec:authorize
    org.springframework.security.taglibs.authz.JspAuthorizeTag _jspx_th_sec_005fauthorize_005f3 = (org.springframework.security.taglibs.authz.JspAuthorizeTag) _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess.get(org.springframework.security.taglibs.authz.JspAuthorizeTag.class);
    boolean _jspx_th_sec_005fauthorize_005f3_reused = false;
    try {
      _jspx_th_sec_005fauthorize_005f3.setPageContext(_jspx_page_context);
      _jspx_th_sec_005fauthorize_005f3.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_sec_005fauthorize_005f1);
      // /WEB-INF/views/dealight/business/manage/../../../includes/mainMenu.jsp(293,7) name = access type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_sec_005fauthorize_005f3.setAccess("hasRole('ROLE_MEMBER')");
      int _jspx_eval_sec_005fauthorize_005f3 = _jspx_th_sec_005fauthorize_005f3.doStartTag();
      if (_jspx_eval_sec_005fauthorize_005f3 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
        out.write("\t\t\t\t\t\t\t\t\n");
        out.write("\t\t\t\t\t\t\t\t<div class=\"account_cnts\"><a href=\"/dealight/business/\">매장 관리</a></div>\n");
        out.write("\t\t\t\t\t\t\t");
      }
      if (_jspx_th_sec_005fauthorize_005f3.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess.reuse(_jspx_th_sec_005fauthorize_005f3);
      _jspx_th_sec_005fauthorize_005f3_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_sec_005fauthorize_005f3, _jsp_getInstanceManager(), _jspx_th_sec_005fauthorize_005f3_reused);
    }
    return false;
  }

  private boolean _jspx_meth_sec_005fauthorize_005f4(javax.servlet.jsp.tagext.JspTag _jspx_th_sec_005fauthorize_005f1, javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  sec:authorize
    org.springframework.security.taglibs.authz.JspAuthorizeTag _jspx_th_sec_005fauthorize_005f4 = (org.springframework.security.taglibs.authz.JspAuthorizeTag) _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess.get(org.springframework.security.taglibs.authz.JspAuthorizeTag.class);
    boolean _jspx_th_sec_005fauthorize_005f4_reused = false;
    try {
      _jspx_th_sec_005fauthorize_005f4.setPageContext(_jspx_page_context);
      _jspx_th_sec_005fauthorize_005f4.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_sec_005fauthorize_005f1);
      // /WEB-INF/views/dealight/business/manage/../../../includes/mainMenu.jsp(296,7) name = access type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_sec_005fauthorize_005f4.setAccess("hasRole('ROLE_ADMIN')");
      int _jspx_eval_sec_005fauthorize_005f4 = _jspx_th_sec_005fauthorize_005f4.doStartTag();
      if (_jspx_eval_sec_005fauthorize_005f4 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
        out.write("\t\t\t\t\t\t\t\t\n");
        out.write("\t\t\t\t\t\t\t\t<div class=\"account_cnts\"><a href=\"/dealight/admin/main \">서비스 관리</a></div>\n");
        out.write("\t\t\t\t\t\t\t");
      }
      if (_jspx_th_sec_005fauthorize_005f4.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fsec_005fauthorize_0026_005faccess.reuse(_jspx_th_sec_005fauthorize_005f4);
      _jspx_th_sec_005fauthorize_005f4_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_sec_005fauthorize_005f4, _jsp_getInstanceManager(), _jspx_th_sec_005fauthorize_005f4_reused);
    }
    return false;
  }
}
